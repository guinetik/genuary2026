import{o as m,G as z,P as I,n as L,w as M,H as w,A as H,J as D,L as F,O as E,E as S,m as G}from"./gcanvas.es-ChtmA8T6.js";const g={colors:{red:"#E53935",yellow:"#FFCA28",blue:"#1E88E5",black:"#1A1A1A",cream:"#F5F0E6",darkCream:"#E8E0D0"},layers:{background:.05,far:.15,mid:.35,near:.6,front:.85},parallaxSmoothing:.08,entranceDuration:.6,margin:.08};class N extends G{constructor(t,e,s={}){super(t,s),this.shape=e,this.baseX=s.baseX||.5,this.baseY=s.baseY||.5,this.depth=s.depth||.5,this.delay=s.delay||0,this.normX=this.baseX,this.normY=this.baseY,this.x=this.baseX*t.width,this.y=this.baseY*t.height,this.scaleX=1,this.scaleY=1}animateEntrance(){this.scaleX=0,this.scaleY=0,m.to(this,{scaleX:1,scaleY:1},g.entranceDuration,S.easeOutBack,{delay:this.delay})}reset(){m.killTarget(this),this.scaleX=0,this.scaleY=0}update(t){super.update(t);const e=this.game.mouseOffsetX||0,s=this.game.mouseOffsetY||0,h=e*this.depth*.08,c=s*this.depth*.08,o=this.baseX+h,r=this.baseY+c;this.normX+=(o-this.normX)*g.parallaxSmoothing,this.normY+=(r-this.normY)*g.parallaxSmoothing,this.x=this.normX*this.game.width,this.y=this.normY*this.game.height}draw(){super.draw(),this.shape.x=this.x,this.shape.y=this.y,this.shape.scaleX=this.scaleX,this.shape.scaleY=this.scaleY,this.shape.draw()}}class U extends z{constructor(t){super(t),this.backgroundColor=g.colors.cream}init(){super.init(),I.init(this.ctx),m.killAll(),this.mouseX=this.width/2,this.mouseY=this.height/2,this.targetMouseX=this.width/2,this.targetMouseY=this.height/2,this.mouseOffsetX=0,this.mouseOffsetY=0,this.scene=new L(this,{anchor:"top-left"}),this.parallaxShapes=[],this.textSlideY=30,this.textOpacity=0,this.dateSlideY=20,this.dateOpacity=0,this.generateComposition(),this.startEntranceAnimations(),this.animateText(),this.pipeline.add(this.scene),this.canvas.addEventListener("mousemove",t=>{const e=this.canvas.getBoundingClientRect();this.targetMouseX=t.clientX-e.left,this.targetMouseY=t.clientY-e.top}),this.canvas.addEventListener("mouseleave",()=>{this.targetMouseX=this.width/2,this.targetMouseY=this.height/2}),this.canvas.addEventListener("click",()=>{this.regenerate()}),this.canvas.addEventListener("touchmove",t=>{const e=this.canvas.getBoundingClientRect(),s=t.touches[0];this.targetMouseX=s.clientX-e.left,this.targetMouseY=s.clientY-e.top},{passive:!0}),this.canvas.addEventListener("touchend",()=>{this.regenerate()})}addShape(t,e,s,h,c){const o=new N(this,t,{baseX:e,baseY:s,depth:h,delay:c});this.parallaxShapes.push(o),this.scene.add(o)}generateComposition(){this.parallaxShapes=[];const{colors:t,layers:e}=g,s=Math.min(this.width,this.height),h=[t.red,t.yellow,t.blue],c=[t.red,t.yellow,t.blue,t.black],o=[t.black,t.darkCream,t.cream],r=i=>i[Math.floor(Math.random()*i.length)],a=(i,p)=>i+Math.random()*(p-i),d=(i,p)=>Math.floor(a(i,p+1)),Y=[{depth:e.background,count:[2,4],sizeRange:[.25,.5],delayBase:0},{depth:e.far,count:[3,5],sizeRange:[.12,.25],delayBase:.1},{depth:e.mid,count:[4,7],sizeRange:[.06,.15],delayBase:.25},{depth:e.near,count:[3,6],sizeRange:[.04,.12],delayBase:.4},{depth:e.front,count:[3,5],sizeRange:[.02,.08],delayBase:.5}];for(const i of Y){const p=d(i.count[0],i.count[1]);for(let A=0;A<p;A++){const n=a(i.sizeRange[0],i.sizeRange[1])*s,B=a(.1,.9),P=a(.1,.85),T=i.delayBase+a(0,.15),k=r([0,Math.PI/4,Math.PI/2,-Math.PI/4])+a(-.2,.2),R=d(0,7);let l;const f=i.depth<.2?r(o):r(i.depth>.7?c:h);switch(R){case 0:l=new M(n*.5,{color:f});break;case 1:const v=Math.random()<.3;l=new w({width:v?n*a(2,4):n,height:v?n*.08:n*a(.6,1.5),color:f,rotation:k});break;case 2:l=new E(n*.6,{color:f,rotation:k});break;case 3:l=new F(n*.5,n*.3,{color:f});break;case 4:const C=r([0,Math.PI/2,Math.PI,Math.PI*1.5]);l=new D(n*.5,C,C+Math.PI,{color:f,rotation:k});break;case 5:l=new H(n*.5,0,Math.PI*a(.5,1.5),{stroke:r(h),lineWidth:a(2,6)});break;case 6:l=new w({width:n*.7,height:n*.7,color:f,rotation:Math.PI/4});break;default:l=new M(n*.3,{color:f})}this.addShape(l,B,P,i.depth,T)}}const x=d(2,3);for(let i=0;i<x;i++){const p=Math.random()<.5;this.addShape(new w({width:p?s*.012:s*a(.4,.7),height:p?s*a(.4,.7):s*.012,color:t.black}),a(.2,.8),a(.2,.7),e.mid,a(.3,.4))}const u=r(h),O=d(0,2),y=s*a(.15,.22);let b;O===0?b=new M(y,{color:u}):O===1?b=new w({width:y*1.2,height:y*a(1,1.5),color:u}):b=new E(y,{color:u}),this.addShape(b,a(.25,.75),a(.3,.6),e.far,.15)}startEntranceAnimations(){for(const t of this.parallaxShapes)t.animateEntrance()}animateText(){this.textSlideY=30,this.textOpacity=0,this.dateSlideY=20,this.dateOpacity=0,m.to(this,{textSlideY:0,textOpacity:1},.8,S.easeOutCubic,{delay:.6}),m.to(this,{dateSlideY:0,dateOpacity:1},.6,S.easeOutCubic,{delay:.9})}regenerate(){m.killAll(),this.scene.clear(),this.generateComposition(),this.startEntranceAnimations(),this.animateText()}update(t){super.update(t),this.mouseX+=(this.targetMouseX-this.mouseX)*.1,this.mouseY+=(this.targetMouseY-this.mouseY)*.1,this.mouseOffsetX=(this.mouseX-this.width/2)/(this.width/2),this.mouseOffsetY=(this.mouseY-this.height/2)/(this.height/2)}render(){const t=this.ctx,e=this.width,s=this.height;super.render();const h=Math.min(e,s)*g.margin;t.strokeStyle=g.colors.black,t.lineWidth=3,t.strokeRect(h,h,e-h*2,s-h*2),this.renderBauhausText(t,e,s)}renderBauhausText(t,e,s){const{colors:h}=g,c=s*.96,o=Math.min(e,s)*.025,r=o*1.8,a=e*.5;if(this.textOpacity>0){t.save(),t.globalAlpha=this.textOpacity;const d=c+this.textSlideY;t.fillStyle=h.black,t.font=`bold ${o*1.5}px 'Helvetica Neue', Helvetica, Arial, sans-serif`,t.textAlign="center",t.textBaseline="middle";const Y="BAUHAUS",x=a-r*3.5;for(let u=0;u<Y.length;u++)t.fillText(Y[u],x+u*r,d);t.restore()}if(this.dateOpacity>0){t.save(),t.globalAlpha=this.dateOpacity;const d=c+o*.9+this.dateSlideY;t.fillStyle=h.black,t.font=`${o*.7}px 'Helvetica Neue', Helvetica, Arial, sans-serif`,t.textAlign="center",t.textBaseline="middle",t.fillText("1919-1933",a,d),t.restore()}}onResize(){this.targetMouseX=this.width/2,this.targetMouseY=this.height/2,this.mouseX=this.width/2,this.mouseY=this.height/2,m.killAll(),this.scene.clear(),this.generateComposition(),this.startEntranceAnimations(),this.animateText()}}function $(X){const t=new U(X);return t.start(),{stop:()=>{m.killAll(),t.stop()},game:t}}export{$ as default};
