import{G as B,j as E,T as b,E as y,P as x,u as X,n as D,v as O,w,A as I,x as Y,y as P}from"./gcanvas.es-BF2N4r4i.js";class z extends P{constructor(t,e,o={}){super(o),this.radiusX=t,this.radiusY=e,this.width=t*2,this.height=e*2}draw(){super.draw(),this.color&&x.shapes.fillEllipse(0,0,this.radiusX,this.radiusY,0,this.color),this.stroke&&x.shapes.strokeEllipse(0,0,this.radiusX,this.radiusY,0,this.stroke,this.lineWidth)}}class A extends P{constructor(t={}){super(t),this.baseWidth=t.baseWidth||8,this.height=t.height||18,this.flip=t.flip||!1}draw(){super.draw();const t=this.baseWidth/2,e=this.height,o=this.flip?[{x:-t,y:0},{x:0,y:-e},{x:t,y:0}]:[{x:-t,y:0},{x:0,y:-e},{x:t,y:0}];x.shapes.polygon(o,this.color,this.stroke,this.lineWidth)}}class C extends D{constructor(t,e={}){super(t,e),this.size=e.size||24,this.eyeAngle=0,this.mouthOpen=0,this.puff=1,this.squash=0,this.spitEffect={active:!1,direction:0,timer:0},this._buildShapes()}_buildShapes(){this.body=new O({x:0,y:0}),this.head=new w(this.size,{color:"#9b59b6"}),this.body.add(this.head),this.leftHorn=new A({x:-12,y:-14,baseWidth:8,height:18,color:"#6c3483"}),this.rightHorn=new A({x:12,y:-14,baseWidth:8,height:18,flip:!0,color:"#6c3483"}),this.body.add(this.leftHorn),this.body.add(this.rightHorn);const t=-4,e=8;this.leftEyeWhite=new w(6,{x:-e,y:t,color:"#fff"}),this.rightEyeWhite=new w(6,{x:e,y:t,color:"#fff"}),this.body.add(this.leftEyeWhite),this.body.add(this.rightEyeWhite),this.leftPupil=new w(3,{x:-e,y:t,color:"#000"}),this.rightPupil=new w(3,{x:e,y:t,color:"#000"}),this.body.add(this.leftPupil),this.body.add(this.rightPupil),this.closedMouth=new I(8,.2,Math.PI-.2,{y:10,stroke:"rgba(0, 0, 0, 0.8)",lineWidth:3}),this.openMouth=new z(5,5,{y:12,color:"rgba(40, 10, 40, 0.9)",stroke:"rgba(0, 0, 0, 0.8)",lineWidth:3}),this.body.add(this.closedMouth),this.currentMouth="closed"}setEyeAngle(t){this.eyeAngle=t;const e=8,o=t*10;this.leftPupil.x=-e+o,this.rightPupil.x=e+o}setMouthOpen(t){if(this.mouthOpen=t,t>.1&&this.currentMouth==="closed"?(this.body.remove(this.closedMouth),this.body.add(this.openMouth),this.currentMouth="open"):t<=.1&&this.currentMouth==="open"&&(this.body.remove(this.openMouth),this.body.add(this.closedMouth),this.currentMouth="closed"),this.currentMouth==="open"){const e=3+t*4,o=2+t*6;this.openMouth.radiusX=e,this.openMouth.radiusY=o}}startSpitEffect(t){this.spitEffect.active=!0,this.spitEffect.direction=t,this.spitEffect.timer=.08}update(t){super.update(t),this.spitEffect.active&&(this.spitEffect.timer-=t,this.spitEffect.timer<=0&&(this.spitEffect.active=!1))}draw(){super.draw();const t=this.puff*(1+this.squash*.35),e=this.puff*(1-this.squash*.28);x.save(),x.ctx.scale(t,e),this.body.render(),x.restore()}drawSpitEffect(){if(!this.spitEffect.active)return;const t=x.ctx;t.save(),t.translate(this.x,this.y);const e=this.puff*(1+this.squash*.35),o=this.puff*(1-this.squash*.28);t.scale(e,o),this._drawSpitLines(),t.restore()}_drawSpitLines(){const t=this.spitEffect.direction,e=14,o=this.spitEffect.timer/.08,i=x.ctx;i.strokeStyle=`rgba(255, 255, 255, ${o*.9})`,i.lineWidth=3,i.lineCap="round";for(let h=0;h<3;h++){const r=(h-1)*5,s=15+h*6;i.beginPath(),i.moveTo(t*6,e+r*.3),i.lineTo(t*(6+s),e+r),i.stroke()}}}class H extends D{constructor(t,e={}){super(t,e),this.text=e.text||"...",this.targetX=e.targetX||0,this.targetY=e.targetY||0,this.alpha=0,this._buildShapes()}_buildShapes(){this.cloud=new Y(50,{color:"rgba(255, 255, 255, 0.95)"}),this.trailCircles=[new w(10,{color:"rgba(255, 255, 255, 0.9)"}),new w(7,{color:"rgba(255, 255, 255, 0.85)"}),new w(4,{color:"rgba(255, 255, 255, 0.8)"})]}draw(){if(super.draw(),this.alpha<=0)return;const t=x.ctx;t.globalAlpha=this.alpha;const e=this.targetX-this.x,o=this.targetY-this.y;for(let s=0;s<this.trailCircles.length;s++){const n=(s+1)/(this.trailCircles.length+1),a=e*n*.6,c=o*n*.6+30;t.save(),t.translate(a,c),this.trailCircles[s].render(),t.restore()}this.cloud.render(),t.fillStyle="#333",t.font="bold 10px 'Fira Code', monospace",t.textAlign="center",t.textBaseline="middle";const i=this.text.split(`
`),h=12,r=-((i.length-1)*h)/2;for(let s=0;s<i.length;s++)t.fillText(i[s],0,r+s*h);t.globalAlpha=1}}const d={particleSize:20,baseParticles:1e3,baseArea:1920*1080,minParticles:500,maxParticles:3e3,gravity:0,container:{marginX:0,marginY:0},wall:{width:8},demon:{tempThreshold:.5,batchPercent:.02,minBatch:5,maxBatch:50,largeScreenWidth:2560},phases:{entropyDuration:10,exhaustedDuration:10,departureDuration:5,colorTransitionTime:2}};class k extends B{constructor(t){super(t),this.backgroundColor=null,this.demonArrived=!1,this.visuals={leftBgAlpha:0,rightBgAlpha:0,wallProgress:0},this.spitDirection=0,this.gobbleFromDirection=0,this.gobbleTargets=[],this.gobbleProgress=0,this.gobbleDuration=.3,this.gobbleStateTimer=0,this.phaseTimer=0,this.phaseState=new E({initial:"entropy",context:this,states:{entropy:{enter:()=>this._enterEntropy(),update:e=>this._updateEntropy(e)},arrival:{enter:()=>this._enterArrival(),update:e=>this._updateArrival(e)},sorting:{enter:()=>this._enterSorting(),update:e=>this._updateSorting(e)},exhausted:{enter:()=>this._enterExhausted(),update:e=>this._updateExhausted(e)},departure:{enter:()=>this._enterDeparture(),update:e=>this._updateDeparture(e)}}}),this.gobbleState=new E({initial:"idle",context:this,states:{idle:{enter:()=>{this.gobbleTargets=[],this.gobbleProgress=0,this.gobbleStateTimer=.02,this.demon&&(this.demon.setMouthOpen(0),this.demon.puff=1,this.demon.squash=0)},update:e=>this._idleUpdate(e)},gobbling:{enter:()=>{const e=this.bounds.y+this.bounds.h/2;this.gobbleTargets.forEach((h,r)=>{const s=h.x-this.wallX,n=h.y-e;h._gobbleDist=Math.sqrt(s*s+n*n)}),this.gobbleTargets.sort((h,r)=>h._gobbleDist-r._gobbleDist);const o=.03;this.gobbleTargets.forEach((h,r)=>{h._gobbleDelay=r*o,h._arrived=!1});const i=(this.gobbleTargets.length-1)*o;this.gobbleDuration=i+.15,this.gobbleElapsed=0,this.targetPuff=1.3+this.gobbleTargets.length*.02,this.demon&&b.to(this.demon,{squash:.5},.15,y.easeOutQuad),this.gobbleStateTimer=this.gobbleDuration},update:e=>this._gobblingUpdate(e)},holding:{enter:()=>{this.gobbleProgress=1,this.demon&&this.demon.setMouthOpen(0),this.gobbleStateTimer=.05},update:e=>this._holdingUpdate(e)},spitting:{enter:()=>{this.gobbleTargets.sort((h,r)=>{const s=h.custom.isHot?1:0;return(r.custom.isHot?1:0)-s}),this.hotInBatch=this.gobbleTargets.filter(h=>h.custom.isHot).length,this.coldInBatch=this.gobbleTargets.length-this.hotInBatch,this.spitElapsed=0,this.spitIndex=0;const e=.03,o=.5,i=this.hotInBatch>0&&this.coldInBatch>0;this.spitDuration=this.gobbleTargets.length*e+(i?o:0)+.05,this.gobbleStateTimer=this.spitDuration,this.demon&&(this.demon.setMouthOpen(1),this.demon.startSpitEffect(this.spitDirection),b.to(this.demon,{squash:-.8},.1,y.easeOutBack))},update:e=>this._spittingUpdate(e)}}})}init(){super.init(),x.init(this.ctx),console.log("[Day16] Initializing Maxwell's Demon..."),this._updateBounds(),this.wallX=this.bounds.x+this.bounds.w/2;const e=this.width*this.height/d.baseArea;this.particleCount=Math.floor(Math.min(d.maxParticles,Math.max(d.minParticles,d.baseParticles*e))),console.log(`[Day16] Canvas: ${this.width}x${this.height}, particles: ${this.particleCount}`),this.fluid=new X(this,{maxParticles:this.particleCount,particleSize:d.particleSize,width:this.bounds.w,height:this.bounds.h,bounds:this.bounds,physics:"gas",debug:!1,gravity:d.gravity,heat:{enabled:!1},thermalEquilibrium:!1,heatTransfer:{enabled:!1},particleColor:{r:255,g:255,b:255,a:.9}}),this.fluid.spawn(this.particleCount),this._initParticles();const o=this.fluid.particles.filter(h=>h.custom.fixedTemp>.5).length,i=this.fluid.particles.length-o;console.log(`[Day16] Initial fixedTemps: ${o} hot, ${i} cold (${(o/this.fluid.particles.length*100).toFixed(1)}% hot)`),this.demon=new C(this,{x:this.wallX,y:this.bounds.y+this.bounds.h/2,size:24,visible:!1}),this.pipeline.add(this.demon),this.pipeline.add(this.fluid),this.thoughtBubble=new H(this,{x:this.wallX,y:this.bounds.y+this.bounds.h/2-100,targetX:this.wallX,targetY:this.bounds.y+this.bounds.h/2-30,text:""}),this.pipeline.add(this.thoughtBubble),this._enterEntropy(),console.log("[Day16] Init complete, starting entropy phase"),this.canvas.addEventListener("click",()=>this._restartSimulation())}_restartSimulation(){console.log("[Day16] Restarting simulation...");const t=this.bounds.x+this.bounds.w/2,e=this.bounds.y+this.bounds.h/2;for(const o of this.fluid.particles){const i=.1+Math.random()*.8;o.custom.temperature=i,o.custom.fixedTemp=i,o.custom.sorted=!1,o.size=d.particleSize;const h=30+Math.random()*50,r=Math.random()*Math.PI*2;o.x=t+Math.cos(r)*h,o.y=e+Math.sin(r)*h;const s=100+Math.random()*200,n=r+(Math.random()-.5)*.5;o.vx=Math.cos(n)*s,o.vy=Math.sin(n)*s}this.demon&&(this.demon.alpha=0,this.demon.puff=1,this.demon.squash=0,this.demon.setMouthOpen(0)),this.thoughtBubble&&(this.thoughtBubble.alpha=0),this.visuals={leftBgAlpha:0,rightBgAlpha:0,wallProgress:0},this.gobbleTargets=[],this.gobbleProgress=0,this.demonArrived=!1,this.phaseState.setState("entropy"),this._enterEntropy()}_initParticles(){for(const t of this.fluid.particles){const e=.1+Math.random()*.8;t.custom.temperature=e,t.custom.fixedTemp=e,t.custom.sorted=!1}}_updateBounds(){const{marginX:t,marginY:e}=d.container;this.bounds={x:t,y:e,w:this.width-t*2,h:this.height-e*2}}update(t){b.updateAll(t),this.phaseState.update(t),super.update(t),this._lockSortedTemperatures(),this._colorByTemperature(),this._enforceTemperatureSpeeds()}_enterEntropy(){console.log("[Day16] Entering ENTROPY phase"),this.phaseTimer=0,this.demonArrived=!1,this.thoughtBubble&&(this.thoughtBubble.alpha=0)}_updateEntropy(t){this.phaseTimer+=t,this.phaseTimer>=d.phases.entropyDuration&&this.phaseState.setState("arrival")}_enterArrival(){this.phaseTimer=0,this.demonArrived=!0,this.demon&&(this.demon.visible=!0,this.demon.scaleX=0,this.demon.scaleY=0,b.to(this.demon,{scaleX:1,scaleY:1},.5,y.easeOutBack)),b.to(this.visuals,{leftBgAlpha:.3},.4,y.easeOutQuad,{delay:.3}),b.to(this.visuals,{rightBgAlpha:.3},.4,y.easeOutQuad,{delay:.5}),b.to(this.visuals,{wallProgress:1},.6,y.easeInOutQuad,{delay:.7})}_updateArrival(t){this.phaseTimer+=t,this.visuals.wallProgress>=1&&this.phaseState.setState("sorting")}_enterSorting(){this.phaseTimer=0,this.gobbleState.setState("idle");let t=0,e=0,o=0,i=0;for(const h of this.fluid.particles){const r=(h.custom.fixedTemp??h.custom.temperature)>.5,s=h.x<this.wallX;s&&r?t++:s&&!r?e++:!s&&r?o++:i++}console.log(`[Day16] Sorting start (fixedTemp): LEFT: ${t} hot + ${e} cold | RIGHT: ${o} hot + ${i} cold`)}_updateSorting(t){this._enforceWall(),this.gobbleState.update(t),this.gobbleState.currentState==="idle"&&this.gobbleTargets.length===0&&this._checkAllSorted()&&(console.log("[Day16] All sorted! Transitioning to exhausted"),this.phaseState.setState("exhausted"))}_enterExhausted(){console.log("[Day16] EXHAUSTED - showing bubble"),this.phaseTimer=0,this.demon&&(this.demon.setEyeAngle(0),this.demon.setMouthOpen(0)),this.thoughtBubble&&(console.log("[Day16] Setting bubble text and alpha"),this.thoughtBubble.text=`YOU ARE
ALL FREE
NOW`,this.thoughtBubble.alpha=1)}_updateExhausted(t){this.phaseTimer+=t,this._enforceWall(),this.phaseTimer>=d.phases.exhaustedDuration&&this.phaseState.setState("departure")}_enterDeparture(){this.phaseTimer=0,this.thoughtBubble&&b.to(this.thoughtBubble,{alpha:0},.3,y.easeOutQuad),this.demon&&b.to(this.demon,{scaleX:0,scaleY:0},.5,y.easeInBack,{delay:.3,onComplete:()=>{this.demon.visible=!1}}),b.to(this.visuals,{leftBgAlpha:0},.8,y.easeOutQuad,{delay:.5}),b.to(this.visuals,{rightBgAlpha:0},.8,y.easeOutQuad,{delay:.5}),b.to(this.visuals,{wallProgress:0},.8,y.easeInQuad,{delay:.5})}_updateDeparture(t){this.phaseTimer+=t,this.phaseTimer>=d.phases.departureDuration&&(console.log("[Day16] Departure complete, returning to entropy"),this._randomizeParticleVelocities(),this.phaseState.setState("entropy"))}_checkAllSorted(){for(const t of this.fluid.particles)if(!t.custom.sorted)return!1;return!0}_randomizeParticleVelocities(){for(const t of this.fluid.particles){const e=50+Math.random()*150,o=Math.random()*Math.PI*2;t.vx=Math.cos(o)*e,t.vy=Math.sin(o)*e,t.custom.sorted=!1}}_enforceWall(){const t=this.wallX,e=d.wall.width/2;for(const o of this.fluid.particles){if(this.gobbleTargets.includes(o))continue;const i=o.x-t;Math.abs(i)<e+d.particleSize/2&&(i>0?(o.x=t+e+d.particleSize/2,o.vx=Math.abs(o.vx)*.8):(o.x=t-e-d.particleSize/2,o.vx=-Math.abs(o.vx)*.8))}}_idleUpdate(t){if(this.gobbleStateTimer-=t,this.gobbleStateTimer>0){this.demon&&(this.demon.eyeAngle*=.95,this.demon.setEyeAngle(this.demon.eyeAngle));return}const{tempThreshold:e,batchPercent:o,minBatch:i,maxBatch:h,largeScreenWidth:r}=d.demon,n=this.width>=r?h*3:h,a=this.fluid.particles.length,c=Math.min(n,Math.max(i,Math.floor(a*o))),u=[],g=[],m=[];for(const l of this.fluid.particles){const f=l.x-this.wallX,v=Math.abs(f),M=(l.custom.fixedTemp??l.custom.temperature??.5)>e,_=f>0;M&&_||!M&&!_?_?u.push({p:l,dist:v,isHot:M,onRight:!0}):g.push({p:l,dist:v,isHot:M,onRight:!1}):l.custom.sorted||m.push({p:l,dist:v,isHot:M,onRight:_})}u.sort((l,f)=>l.dist-f.dist),g.sort((l,f)=>l.dist-f.dist),m.sort((l,f)=>l.dist-f.dist);let p=[],S=0;if(u.length>0||g.length>0){const l=Math.ceil(c/2),f=u.slice(0,l),v=g.slice(0,l);p=[...f,...v],S=f.length>=v.length?1:-1}p.length===0&&m.length>0&&(p=m.slice(0,c),S=p[0].onRight?1:-1),p.length>0&&(p.sort((l,f)=>(f.isHot?1:0)-(l.isHot?1:0)),this.gobbleTargets=p.map(l=>(l.p.custom.isHot=l.isHot,l.p._startX=l.p.x,l.p._startY=l.p.y,l.p)),this.hotInBatch=p.filter(l=>l.isHot).length,this.coldInBatch=p.length-this.hotInBatch,this.gobbleFromDirection=S,this.spitDirection=this.hotInBatch>0?-1:1,this.demon&&this.demon.setEyeAngle(this.gobbleFromDirection*.5),this.gobbleState.setState("gobbling")),this.demon&&(this.demon.eyeAngle*=.95,this.demon.setEyeAngle(this.demon.eyeAngle))}_gobblingUpdate(t){this.gobbleStateTimer-=t,this.gobbleElapsed+=t;const e=Math.min(1,Math.max(0,1-this.gobbleStateTimer/this.gobbleDuration));if(this.gobbleProgress=e,this.demon){const s=this.gobbleTargets.filter(S=>S._arrived).length,n=this.gobbleTargets.length,a=n>0?s/n:0,c=Math.min(1,s*.15+e*.3);this.demon.setMouthOpen(c);const u=1,g=this.targetPuff||1.5,m=u+(g-u)*a;this.demon.puff+=(m-this.demon.puff)*.15;const p=.4+a*.6;this.demon.squash+=(p-this.demon.squash)*.12}const o=this.bounds.y+this.bounds.h/2,i=this.wallX,h=o+14;for(const s of this.gobbleTargets){if(s._arrived){s.x=i,s.y=h,s.vx=0,s.vy=0,s.size=0;continue}if(this.gobbleElapsed<s._gobbleDelay){s._startX!==void 0&&(s.x=s._startX,s.y=s._startY,s.vx=0,s.vy=0);continue}const n=i-s.x,a=h-s.y,c=Math.sqrt(n*n+a*a);if(c>8){const u=this.gobbleElapsed-s._gobbleDelay,m=2500+Math.min(1,u/.12)*4e3;s.vx=n/c*m,s.vy=a/c*m;const p=80;if(c<p){const S=1-c/p;s.size=d.particleSize*(1-S*.9)}else s.size=d.particleSize}else s.x=i,s.y=h,s.vx=0,s.vy=0,s.size=0,s._arrived=!0}this.gobbleTargets.every(s=>s._arrived)&&(this.gobbleProgress=1,this.gobbleState.setState("holding"))}_holdingUpdate(t){this.gobbleStateTimer-=t;const o=1-this.gobbleStateTimer/.05,i=this.bounds.y+this.bounds.h/2,h=this.wallX,r=i+14;for(const s of this.gobbleTargets)s.x=h,s.y=r,s.vx=0,s.vy=0,s.size=0;if(this.demon){const s=.6+Math.sin(o*Math.PI*3)*.1;this.demon.squash+=(s-this.demon.squash)*.2}this.demon&&(o<.4?this.demon.setEyeAngle(this.gobbleFromDirection*.5):o<.7?(this.demon.eyeAngle*=.7,this.demon.setEyeAngle(this.demon.eyeAngle)):this.demon.setEyeAngle(this.spitDirection*.5)),this.gobbleStateTimer<=0&&this.gobbleState.setState("spitting")}_spittingUpdate(t){this.gobbleStateTimer-=t,this.spitElapsed+=t;const e=.03,o=this.bounds.y+this.bounds.h/2,i=this.wallX,h=o+14;for(let n=this.spitIndex;n<this.gobbleTargets.length;n++){const a=this.gobbleTargets[n];a.x=i,a.y=h,a.vx=0,a.vy=0,a.size=0}const r=.5,s=this.hotInBatch||0;for(;this.spitIndex<this.gobbleTargets.length;){let n=this.spitIndex*e;if(this.spitIndex>=s&&s>0&&(n+=r),this.spitElapsed<n)break;const a=this.gobbleTargets[this.spitIndex];a.x=i,a.y=h,a.size=d.particleSize;const c=a.custom.isHot?-1:1,u=4e3+Math.random()*1e3,g=(Math.random()-.5)*.2;a.vx=c*u,a.vy=g*u*.3,a.custom.sorted=!0,a.custom.lockedTemp=a.custom.isHot?.9:.02,a.custom.temperature=a.custom.lockedTemp,this.demon&&(this.demon.startSpitEffect(c),this.demon.setEyeAngle(c*.5),this.spitDirection=c),this.spitIndex++}if(this.demon){const n=this.gobbleTargets.length,a=this.spitIndex,c=n-a,u=n>0?a/n:1,g=Math.min(1,c*.15);this.demon.setMouthOpen(g);const m=this.targetPuff||1.5,p=m-(m-1)*u;this.demon.puff+=(p-this.demon.puff)*.15;const S=-.6*(1-u)+Math.sin(u*Math.PI)*.25;this.demon.squash+=(S-this.demon.squash)*.12}this.gobbleStateTimer<=0&&(this.demon&&b.to(this.demon,{puff:1,squash:0},.2,y.easeOutBack),this.gobbleState.setState("idle"))}_lockSortedTemperatures(){for(const t of this.fluid.particles)t.custom.sorted&&t.custom.lockedTemp!==void 0&&(t.custom.temperature=t.custom.lockedTemp)}_enforceTemperatureSpeeds(){for(const i of this.fluid.particles){if(this.gobbleTargets.includes(i)||!i.custom.sorted)continue;const h=Math.sqrt(i.vx*i.vx+i.vy*i.vy);if(h<1||h>600)continue;const s=(i.custom.isHot?450:80)/h;i.vx+=(i.vx*s-i.vx)*.01,i.vy+=(i.vy*s-i.vy)*.01}}_colorByTemperature(){const t=this.phaseState.currentState;let e=1;t==="entropy"&&this.phaseTimer<d.phases.colorTransitionTime&&(e=this.phaseTimer/d.phases.colorTransitionTime);const o=t==="exhausted"||t==="departure";for(const i of this.fluid.particles){const h=i.custom.fixedTemp??i.custom.temperature,r=h>.5,s=Math.floor(255*h),n=Math.floor(80*(1-Math.abs(h-.5)*2)),a=Math.floor(255*(1-h)),c=r?255:0,u=0,g=r?0:255;o||i.custom.sorted?(i.color.r=c,i.color.g=u,i.color.b=g):t==="entropy"&&e<1?(i.color.r=Math.floor(c+(s-c)*e),i.color.g=Math.floor(u+(n-u)*e),i.color.b=Math.floor(g+(a-g)*e)):(i.color.r=s,i.color.g=n,i.color.b=a)}}render(){const t=this.ctx;t.fillStyle="rgba(0, 0, 0, 0.15)",t.fillRect(0,0,this.width,this.height);const{leftBgAlpha:e,rightBgAlpha:o,wallProgress:i}=this.visuals;if(e>0&&(t.fillStyle=`rgba(60, 20, 20, ${e*.3})`,t.fillRect(this.bounds.x,this.bounds.y,this.bounds.w/2,this.bounds.h)),o>0&&(t.fillStyle=`rgba(10, 15, 80, ${o*.3})`,t.fillRect(this.wallX,this.bounds.y,this.bounds.w/2,this.bounds.h)),i>0){t.fillStyle="#666";const h=this.bounds.h*i;t.fillRect(this.wallX-d.wall.width/2,this.bounds.y,d.wall.width,h)}this.pipeline.render(t),this.demon&&this.demon.drawSpitEffect()}}function L(T){console.log("[Day16] Module loaded, creating game...");const t=new k(T);function e(){T.width>0&&T.height>0?(console.log("[Day16] Canvas ready, starting game"),t.start()):(console.log("[Day16] Canvas not ready, retrying..."),requestAnimationFrame(e))}return e(),{stop:()=>t.stop(),game:t,handlesResize:!0}}export{L as default};
