import{G as j,C as A}from"./gcanvas.es-C8KsZzA1.js";const e={ringCount:30,ringSpacing:60,baseRadiusRatio:.35,circlesPerRing:18,speed:180,twistSpeed:.3,wobbleRatio:.04,wobbleSpeed:.8,hue:135,pulseSpeed:2};class Y extends j{constructor(t){super(t),this.backgroundColor="#000"}init(){super.init();const t=Math.min(this.width,this.height);this.camera=new A({perspective:t*.6,rotationX:0,rotationY:0,sensitivity:.003,inertia:!0,friction:.95,clampX:!0,minRotationX:-.8,maxRotationX:.8}),this.camera.enableMouseControl(this.canvas),this.time=0,this.zOffset=0,this.direction=1,this.canvas.addEventListener("click",()=>{this.direction*=-1}),this.canvas.addEventListener("touchend",o=>{this.camera._isDragging||(this.direction*=-1)})}update(t){super.update(t),this.time+=t,this.zOffset+=e.speed*t*this.direction,this.camera.update(t)}render(){const t=this.ctx,o=this.width,r=this.height,g=Math.round(o/2),b=Math.round(r/2),a=Math.min(o,r),C=a*e.baseRadiusRatio,f=a*e.wobbleRatio;t.fillStyle="rgba(0, 0, 0, 0.15)",t.fillRect(0,0,o,r);const h=[],l=e.ringCount*e.ringSpacing;for(let s=0;s<e.ringCount;s++){let i=(s*e.ringSpacing-this.zOffset)%l;if(i<0&&(i+=l),i<20)continue;const v=this.time*e.twistSpeed+i*.002,y=Math.sin(this.time*e.wobbleSpeed+i*.01)*f,z=Math.cos(this.time*e.wobbleSpeed*.7+i*.01)*f*.6,P=1+Math.sin(this.time*e.pulseSpeed+i*.02)*.1,S=C*P;for(let p=0;p<e.circlesPerRing;p++){const x=p/e.circlesPerRing*Math.PI*2+v,D=Math.cos(x)*S+y,X=Math.sin(x)*S+z,c=this.camera.project(D,X,i),$=a*.018,G=Math.max(2,$*c.scale),M=1-i/l,I=35+M*20,O=Math.min(1,M*1.5);h.push({x:g+c.x,y:b+c.y,radius:G,z:c.z,lightness:I,alpha:O})}}h.sort((s,i)=>i.z-s.z),t.shadowBlur=8,t.shadowColor=`hsl(${e.hue}, 100%, 50%)`;for(const s of h){if(s.alpha<.05)continue;const i=`hsl(${e.hue}, 100%, ${s.lightness}%)`;t.beginPath(),t.arc(s.x,s.y,s.radius,0,Math.PI*2),t.fillStyle=i,t.globalAlpha=s.alpha,t.fill()}t.shadowBlur=0,t.globalAlpha=1;const w=this.camera.project(0,0,200),d=g+w.x,u=b+w.y,R=a*.2,n=t.createRadialGradient(d,u,0,d,u,R);n.addColorStop(0,`hsla(${e.hue}, 100%, 50%, 0.4)`),n.addColorStop(.5,`hsla(${e.hue}, 100%, 45%, 0.15)`),n.addColorStop(1,`hsla(${e.hue}, 100%, 40%, 0)`),t.beginPath(),t.arc(d,u,R,0,Math.PI*2),t.fillStyle=n,t.fill()}}function B(m){const t=new Y(m);return t.start(),{stop:()=>t.stop(),game:t}}export{B as default};
