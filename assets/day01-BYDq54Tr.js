import{G as j,C as A}from"./gcanvas.es-D8Mt5M0H.js";const i={ringCount:40,ringSpacing:50,baseRadiusRatio:.35,circlesPerRing:24,speed:180,twistSpeed:.3,wobbleRatio:.04,wobbleSpeed:.8,hue:135,pulseSpeed:2};class Y extends j{constructor(t){super(t),this.backgroundColor="#000"}init(){super.init();const t=Math.min(this.width,this.height);this.camera=new A({perspective:t*.6,rotationX:0,rotationY:0,sensitivity:.003,inertia:!0,friction:.95,clampX:!0,minRotationX:-.8,maxRotationX:.8}),this.camera.enableMouseControl(this.canvas),this.time=0,this.zOffset=0,this.direction=1,this.canvas.addEventListener("click",()=>{this.direction*=-1}),this.canvas.addEventListener("touchend",o=>{this.camera._isDragging||(this.direction*=-1)})}update(t){super.update(t),this.time+=t,this.zOffset+=i.speed*t*this.direction,this.camera.update(t)}render(){const t=this.ctx,o=this.width,l=this.height,f=Math.round(o/2),S=Math.round(l/2),a=Math.min(o,l),v=a*i.baseRadiusRatio,R=a*i.wobbleRatio;t.fillStyle="rgba(0, 0, 0, 0.15)",t.fillRect(0,0,o,l);const h=[],d=i.ringCount*i.ringSpacing;for(let e=0;e<i.ringCount;e++){let s=(e*i.ringSpacing-this.zOffset)%d;if(s<0&&(s+=d),s<20)continue;const c=this.time*i.twistSpeed+s*.002,g=Math.sin(this.time*i.wobbleSpeed+s*.01)*R,z=Math.cos(this.time*i.wobbleSpeed*.7+s*.01)*R*.6,P=1+Math.sin(this.time*i.pulseSpeed+s*.02)*.1,C=v*P;for(let m=0;m<i.circlesPerRing;m++){const M=m/i.circlesPerRing*Math.PI*2+c,$=Math.cos(M)*C+g,D=Math.sin(M)*C+z,r=this.camera.project($,D,s),G=a*.018,X=Math.max(2,G*r.scale),y=1-s/d,I=35+y*20,O=Math.min(1,y*1.5);h.push({x:f+r.x,y:S+r.y,radius:X,z:r.z,lightness:I,alpha:O})}}h.sort((e,s)=>s.z-e.z);for(const e of h){if(e.alpha<.05)continue;const s=t.createRadialGradient(e.x,e.y,0,e.x,e.y,e.radius*2),c=`hsl(${i.hue}, 100%, ${e.lightness}%)`,g=`hsla(${i.hue}, 100%, ${e.lightness}%, 0)`;s.addColorStop(0,c),s.addColorStop(.4,c),s.addColorStop(1,g),t.beginPath(),t.arc(e.x,e.y,e.radius*2,0,Math.PI*2),t.fillStyle=s,t.globalAlpha=e.alpha,t.fill()}t.globalAlpha=1;const w=this.camera.project(0,0,200),p=f+w.x,u=S+w.y,x=a*.2,n=t.createRadialGradient(p,u,0,p,u,x);n.addColorStop(0,`hsla(${i.hue}, 100%, 50%, 0.4)`),n.addColorStop(.5,`hsla(${i.hue}, 100%, 45%, 0.15)`),n.addColorStop(1,`hsla(${i.hue}, 100%, 40%, 0)`),t.beginPath(),t.arc(p,u,x,0,Math.PI*2),t.fillStyle=n,t.fill()}}function E(b){const t=new Y(b);return t.start(),{stop:()=>t.stop(),game:t}}export{E as default};
