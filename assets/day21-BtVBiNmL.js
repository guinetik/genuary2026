import{T as m,G as J,P as _,p as q,H as K,x as R,J as A,A as tt,L as et,O as st,Q as Z,E as X,o as at}from"./index-DzXchqqB.js";const it="M 155.707 30.955 L 188.99 30.955 L 188.99 38.17 L 155.707 38.17 L 155.707 30.955 Z M 147.561 38.17 L 147.561 30.955 L 151.518 30.955 L 151.518 38.17 L 147.561 38.17 Z M 19.551 34.912 L 60.98 34.912 L 60.98 38.17 L 19.551 38.17 L 19.551 34.912 Z M 62.376 30.955 L 103.572 30.955 L 103.572 32.119 L 62.376 32.119 L 62.376 30.955 Z M 62.376 9.775 L 87.978 9.775 L 87.978 28.395 L 62.376 28.395 L 62.376 9.775 Z M 168.508 9.775 L 188.99 9.775 L 188.99 28.395 L 168.508 28.395 L 168.508 9.775 Z M 125.683 28.395 L 125.683 9.775 L 146.165 9.775 L 146.165 28.395 L 125.683 28.395 Z M 104.736 9.775 L 125.218 9.775 L 125.218 28.395 L 104.736 28.395 L 104.736 9.775 Z M 103.572 9.775 L 103.572 28.395 L 88.211 28.395 L 88.211 9.775 L 103.572 9.775 Z M 103.572 38.17 L 62.376 38.17 L 62.376 34.912 L 103.572 34.912 L 103.572 38.17 Z M 104.736 34.912 L 115.442 34.912 L 115.442 32.352 L 104.736 32.352 L 104.736 30.955 L 146.165 30.955 L 146.165 38.17 L 104.736 38.17 L 104.736 34.912 Z M 147.561 28.395 L 147.561 9.775 L 168.043 9.775 L 168.043 28.395 L 147.561 28.395 Z M 200.86 28.395 L 190.387 28.395 L 190.387 9.775 L 200.86 9.775 L 200.86 28.395 Z M 155.707 38.869 L 209.472 38.869 L 209.472 38.17 L 190.154 38.17 L 190.154 30.955 L 201.093 30.955 L 201.093 28.628 L 201.093 28.395 L 201.093 9.775 L 201.093 7.448 L 201.093 7.215 L 201.093 6.517 L 169.672 6.517 L 169.672 4.655 L 155.707 4.655 L 155.707 0 L 151.751 0 L 151.751 4.655 L 137.786 4.655 L 137.786 6.517 L 50.041 6.517 L 50.041 7.215 L 50.506 7.215 L 50.506 9.775 L 61.213 9.775 L 61.213 28.395 L 50.506 28.395 L 50.506 30.955 L 61.213 30.955 L 61.213 32.119 L 7.681 32.119 L 7.681 34.679 L 18.387 34.679 L 18.387 37.938 L 0 37.938 L 0 38.636 L 151.518 38.636",o={colors:{red:"#E53935",yellow:"#FFCA28",blue:"#1E88E5",black:"#1A1A1A",cream:"#F5F0E6",darkCream:"#E8E0D0"},layers:{background:.05,far:.15,mid:.35,near:.6,front:.85},parallaxSmoothing:.08,entranceDuration:.6,margin:.08,houseReserve:.25,houseReserveMobile:.18,maxParallaxOffset:.04,houseWidth:.65,houseWidthMobile:.85};class ht extends at{constructor(t,e,s={}){super(t,s),this.shape=e,this.baseX=s.baseX||.5,this.baseY=s.baseY||.5,this.depth=s.depth||.5,this.delay=s.delay||0,this.normX=this.baseX,this.normY=this.baseY,this.x=this.baseX*t.width,this.y=this.baseY*t.height,this.scaleX=0,this.scaleY=0,this.rotationSpeed=s.rotationSpeed||0,this.breatheSpeed=s.breatheSpeed||0,this.breatheAmount=s.breatheAmount||0,this.baseRotation=e.rotation||0,this.time=Math.random()*100}animateEntrance(){this.scaleX=0,this.scaleY=0,m.to(this,{scaleX:1,scaleY:1},o.entranceDuration,X.easeOutBack,{delay:this.delay})}reset(){m.killTarget(this),this.scaleX=0,this.scaleY=0}update(t){super.update(t),this.time+=t;const e=this.game.mouseOffsetX||0,s=this.game.mouseOffsetY||0,i=e*this.depth*o.maxParallaxOffset,n=s*this.depth*o.maxParallaxOffset,l=this.baseX+i,d=this.baseY+n;this.normX+=(l-this.normX)*o.parallaxSmoothing,this.normY+=(d-this.normY)*o.parallaxSmoothing,this.x=this.normX*this.game.width,this.y=this.normY*this.game.height,this.rotationSpeed!==0&&(this.shape.rotation=this.baseRotation+this.time*this.rotationSpeed)}draw(){super.draw(),this.shape.x=this.x,this.shape.y=this.y;const t=this.breatheAmount>0?1+Math.sin(this.time*this.breatheSpeed)*this.breatheAmount:1;this.shape.scaleX=this.scaleX*t,this.shape.scaleY=this.scaleY*t,this.shape.draw()}}class ot extends J{constructor(t){super(t),this.backgroundColor=o.colors.cream}init(){super.init(),_.init(this.ctx),m.killAll(),this.mouseX=this.width/2,this.mouseY=this.height/2,this.targetMouseX=this.width/2,this.targetMouseY=this.height/2,this.mouseOffsetX=0,this.mouseOffsetY=0,this.scene=new q(this,{anchor:"top-left"}),this.parallaxShapes=[],this.textSlideY=30,this.textOpacity=0,this.dateSlideY=20,this.dateOpacity=0,this.houseProgress=0,this.createHouseShape(),this.generateComposition(),this.startEntranceAnimations(),this.animateText(),this.pipeline.add(this.scene),this.canvas.addEventListener("mousemove",t=>{const e=this.canvas.getBoundingClientRect();this.targetMouseX=t.clientX-e.left,this.targetMouseY=t.clientY-e.top}),this.canvas.addEventListener("mouseleave",()=>{this.targetMouseX=this.width/2,this.targetMouseY=this.height/2}),this.canvas.addEventListener("click",()=>{this.regenerate()}),this.canvas.addEventListener("touchmove",t=>{const e=this.canvas.getBoundingClientRect(),s=t.touches[0];this.targetMouseX=s.clientX-e.left,this.targetMouseY=s.clientY-e.top},{passive:!0}),this.canvas.addEventListener("touchend",()=>{this.regenerate()})}createHouseShape(){const t=Math.min(this.width,this.height)*o.margin,e=this.height>this.width,s=e?o.houseWidthMobile:o.houseWidth,n=this.width*s/209,l=39*n,d=e?this.height*.08:0,L=this.width/2,g=this.height-l/2-t-d;this.houseBottomY=g+l/2,this.houseShape=new K(it,{x:L,y:g,stroke:o.colors.black,lineWidth:2,color:null,scale:n,centerPath:!0,animationProgress:0})}generateComposition(){this.parallaxShapes=[];const{colors:t,layers:e,margin:s,maxParallaxOffset:i}=o,n=Math.min(this.width,this.height),d=this.height>this.width?o.houseReserveMobile+.08:o.houseReserve,L=[t.red,t.yellow,t.blue],g=[t.red,t.yellow,t.blue,t.black],Y=[t.black,t.darkCream,t.cream],u=a=>a[Math.floor(Math.random()*a.length)],h=(a,r)=>a+Math.random()*(r-a),y=(a,r)=>Math.floor(h(a,r+1)),I=s+i,F=1-s-i,D=s+i,N=1-d-i,P=a=>{const r=a*.5;return{x:h(I+r,F-r),y:h(D+r,N-r)}},S=1.5,G=[{depth:e.background,count:[2,3],sizeRange:[.2,.35],delayBase:S},{depth:e.far,count:[2,4],sizeRange:[.1,.2],delayBase:S},{depth:e.mid,count:[3,5],sizeRange:[.05,.12],delayBase:S},{depth:e.near,count:[2,4],sizeRange:[.03,.08],delayBase:S},{depth:e.front,count:[2,4],sizeRange:[.02,.05],delayBase:S}];for(const a of G){const r=y(a.count[0],a.count[1]);for(let b=0;b<r;b++){const M=h(a.sizeRange[0],a.sizeRange[1]),c=M*n,T=P(M),U=a.delayBase,v=u([0,Math.PI/4,Math.PI/2,-Math.PI/4])+h(-.1,.1),V=y(0,7);let p;const f=a.depth<.2?u(Y):u(a.depth>.7?g:L),$=a.depth>.5&&Math.random()<.3?h(-.1,.1):0,H=a.depth>.3&&Math.random()<.4?h(.5,1.5):0,j=H>0?h(.02,.05):0;switch(V){case 0:p=new R(c*.5,{color:f});break;case 1:const W=Math.random()<.25;p=new A({width:W?c*h(1.5,2.5):c,height:W?c*.08:c*h(.6,1.4),color:f,rotation:v});break;case 2:p=new Z(c*.6,{color:f,rotation:v});break;case 3:p=new st(c*.5,c*.3,{color:f});break;case 4:const z=u([0,Math.PI/2,Math.PI,Math.PI*1.5]);p=new et(c*.5,z,z+Math.PI,{color:f,rotation:v});break;case 5:p=new tt(c*.5,0,Math.PI*h(.5,1.5),{stroke:u(L),lineWidth:h(2,5)});break;case 6:p=new A({width:c*.7,height:c*.7,color:f,rotation:Math.PI/4});break;default:p=new R(c*.3,{color:f})}this.addShapeWithAnimation(p,T.x,T.y,a.depth,U,{rotationSpeed:$,breatheSpeed:H,breatheAmount:j})}}const Q=y(2,3);for(let a=0;a<Q;a++){const r=Math.random()<.5,b=h(.25,.4),M=P(b);this.addShapeWithAnimation(new A({width:r?n*.01:n*b,height:r?n*b:n*.01,color:t.black}),M.x,M.y,e.mid,h(.3,.4),{})}const O=u(L),B=y(0,2),C=h(.12,.18),x=n*C,E=P(C);let w;B===0?w=new R(x,{color:O}):B===1?w=new A({width:x*1.1,height:x*h(.9,1.3),color:O}):w=new Z(x,{color:O}),this.addShapeWithAnimation(w,E.x,E.y,e.far,.15,{breatheSpeed:.8,breatheAmount:.02})}addShapeWithAnimation(t,e,s,i,n,l={}){const d=new ht(this,t,{baseX:e,baseY:s,depth:i,delay:n,rotationSpeed:l.rotationSpeed||0,breatheSpeed:l.breatheSpeed||0,breatheAmount:l.breatheAmount||0});this.parallaxShapes.push(d),this.scene.add(d)}startEntranceAnimations(){for(const t of this.parallaxShapes)t.animateEntrance()}animateText(){this.textSlideY=30,this.textOpacity=0,this.dateSlideY=20,this.dateOpacity=0,this.houseProgress=0,m.to(this,{houseProgress:1},1.5,X.easeInOutQuad),m.to(this,{textSlideY:0,textOpacity:1},.8,X.easeOutCubic,{delay:2}),m.to(this,{dateSlideY:0,dateOpacity:1},.6,X.easeOutCubic,{delay:2.3})}regenerate(){m.killAll(),this.createHouseShape(),this.scene.clear(),this.generateComposition(),this.startEntranceAnimations(),this.animateText()}update(t){super.update(t),this.mouseX+=(this.targetMouseX-this.mouseX)*.1,this.mouseY+=(this.targetMouseY-this.mouseY)*.1,this.mouseOffsetX=(this.mouseX-this.width/2)/(this.width/2),this.mouseOffsetY=(this.mouseY-this.height/2)/(this.height/2)}render(){const t=this.ctx,e=this.width,s=this.height;super.render(),this.renderFarnsworthHouse(t,e,s);const i=Math.min(e,s)*o.margin;t.strokeStyle=o.colors.black,t.lineWidth=3,t.strokeRect(i,i,e-i*2,s-i*2),this.renderBauhausText(t,e,s)}renderFarnsworthHouse(t,e,s){!this.houseShape||this.houseProgress<=0||(this.houseShape.setAnimationProgress(this.houseProgress),this.houseShape.render())}renderBauhausText(t,e,s){const{colors:i,margin:n}=o,l=s>e,d=Math.min(e,s)*n,L=l&&this.houseBottomY?this.houseBottomY+(s-this.houseBottomY-d)*.4:s*.95,g=Math.min(e,s)*(l?.028:.022),Y=e*.5;if(this.textOpacity>0){t.save(),t.globalAlpha=this.textOpacity;const u=L+this.textSlideY;t.fillStyle=i.black,t.font=`bold ${g*2.2}px 'Helvetica Neue', Helvetica, Arial, sans-serif`,t.textAlign="center",t.textBaseline="middle",t.fillText("BAUHAUS",Y,u),t.restore()}if(this.dateOpacity>0){t.save(),t.globalAlpha=this.dateOpacity*.6;const u=L+g*1.6+this.dateSlideY;t.fillStyle=i.black,t.font=`300 ${g*.65}px 'Helvetica Neue', Helvetica, Arial, sans-serif`,t.textAlign="center",t.textBaseline="middle",t.fillText("1919 â€” 1933",Y,u),t.restore()}}onResize(){this.targetMouseX=this.width/2,this.targetMouseY=this.height/2,this.mouseX=this.width/2,this.mouseY=this.height/2,this.createHouseShape(),m.killAll(),this.scene.clear(),this.generateComposition(),this.startEntranceAnimations(),this.animateText()}destroy(){var t;m.killAll(),this.houseShape=null,(t=super.destroy)==null||t.call(this)}}function rt(k){const t=new ot(k);return t.start(),{stop:()=>{m.killAll(),t.stop()},game:t}}export{rt as default};
