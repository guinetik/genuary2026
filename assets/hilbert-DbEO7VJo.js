import{G as w}from"./index-CdMqmSx5.js";const n={order:5,particleCount:150,particleSpeed:.4,particleSize:3,trailLength:80,hueSpeed:20,saturation:100,baseLightness:55,curveAlpha:.15};class b extends w{constructor(t){super(t),this.backgroundColor="#000"}init(){super.init(),this.time=0,this.hue=120,this.points=[],this.particles=[],this.generateCurve(),this.initParticles()}generateCurve(){this.points=[];const t=Math.pow(2,n.order);for(let s=0;s<t*t;s++){const e=this.d2xy(t,s);this.points.push(e)}}d2xy(t,s){let e=0,o=0,r,l,i,a=s;for(i=1;i<t;i*=2)r=1&a/2,l=1&(a^r),l===0&&(r===1&&(e=i-1-e,o=i-1-o),[e,o]=[o,e]),e+=i*r,o+=i*l,a=Math.floor(a/4);return{x:e,y:o}}initParticles(){this.particles=[];for(let t=0;t<n.particleCount;t++)this.particles.push({pos:Math.random()*this.points.length,speed:n.particleSpeed*(.7+Math.random()*.6),hueOffset:Math.random()*60,size:n.particleSize*(.6+Math.random()*.8)})}update(t){super.update(t),this.time+=t,this.hue=(this.hue+n.hueSpeed*t)%360;for(const s of this.particles)s.pos+=s.speed*this.points.length*t,s.pos>=this.points.length&&(s.pos-=this.points.length)}getPointOnCurve(t){const s=Math.floor(t),e=t-s,o=this.points[s%this.points.length],r=this.points[(s+1)%this.points.length];return{x:o.x+(r.x-o.x)*e,y:o.y+(r.y-o.y)*e}}render(){const t=this.ctx,s=this.width,e=this.height;t.fillStyle="rgba(0, 0, 0, 0.12)",t.fillRect(0,0,s,e);const o=Math.pow(2,n.order),l=Math.min(s,e)-30*2,i=l/(o-1),a=(s-l)/2,d=(e-l)/2;{t.strokeStyle=`hsla(${this.hue}, 50%, 30%, ${n.curveAlpha})`,t.lineWidth=1,t.beginPath();for(let h=0;h<this.points.length;h++){const c=this.points[h],p=a+c.x*i,f=d+c.y*i;h===0?t.moveTo(p,f):t.lineTo(p,f)}t.stroke()}for(const h of this.particles){const c=(this.hue+h.hueOffset)%360;t.lineCap="round";for(let u=0;u<n.trailLength;u++){const x=h.pos-u*.5;if(x<0)continue;const y=this.getPointOnCurve(x),S=a+y.x*i,C=d+y.y*i,M=1-u/n.trailLength,P=h.size*(1-u/n.trailLength*.7);t.fillStyle=`hsla(${c}, ${n.saturation}%, ${n.baseLightness}%, ${M*.6})`,t.beginPath(),t.arc(S,C,P,0,Math.PI*2),t.fill()}const p=this.getPointOnCurve(h.pos),f=a+p.x*i,m=d+p.y*i;t.shadowBlur=10,t.shadowColor=`hsl(${c}, 100%, 60%)`,t.fillStyle=`hsl(${c}, 100%, 75%)`,t.beginPath(),t.arc(f,m,h.size*1.2,0,Math.PI*2),t.fill(),t.shadowBlur=0}}}function z(g){const t=new b(g);return t.start(),{stop:()=>t.stop(),game:t}}export{z as default};
