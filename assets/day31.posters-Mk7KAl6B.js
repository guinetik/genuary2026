import{E as l}from"./index-CyJvuFm5.js";import{CONFIG as s}from"./day31.config-BSqBXNjO.js";class R{constructor(t,e){this.image=t,this.index=e,this.loaded=t.complete&&t.naturalWidth>0,this.active=!1,this.z=-1e3,this.side=1,this.scale=1,this.tilt=0}spawn(t,e){this.active=!0,this.side=e,this.z=t+s.spawnZ,this.scale=.9+Math.random()*.2,this.tilt=e*-.15}update(t){return this.active&&this.z-t<s.cullZ?(this.active=!1,!0):!1}render(t,e,c,z,d){if(!this.active||!this.loaded)return;const i=this.z-e;if(i<-50||i>s.spawnZ+200)return;const h=s.perspective,a=h/(h+Math.max(i,1));if(a<=.03)return;const p=s.sideOffset*this.side*a,f=c+p,u=1-Math.min(1,i/s.spawnZ),m=s.horizonRatio+(s.closeRatio-s.horizonRatio)*u,v=d*m,r=s.posterWidth*this.scale*a,o=s.posterHeight*this.scale*a;if(r<8||o<8)return;const w=l.easeOutQuad(Math.min(1,(s.spawnZ-i)/1200)),g=i>100?1:l.easeInQuad(Math.max(0,(i+300)/400)),n=w*g;n<=.02||(t.save(),t.globalAlpha=n,t.translate(f,v),t.rotate(this.tilt*a),s.posterGlow&&n>.3&&(t.shadowColor="rgba(0, 255, 77, 0.5)",t.shadowBlur=25*a),t.strokeStyle=`rgba(0, 255, 77, ${n})`,t.lineWidth=Math.max(2,3*a),t.strokeRect(-r/2-4,-o/2-4,r+8,o+8),t.drawImage(this.image,-r/2,-o/2,r,o),t.restore())}}export{R as FlyingPoster};
