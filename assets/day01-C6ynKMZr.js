import{G,C as X}from"./gcanvas.es-Cc1M3jca.js";const e={ringCount:40,ringSpacing:50,baseRadius:250,circlesPerRing:24,speed:180,twistSpeed:.3,wobbleAmount:30,wobbleSpeed:.8,hue:135,pulseSpeed:2};class A extends G{constructor(t){super(t),this.backgroundColor="#000"}init(){super.init(),this.camera=new X({perspective:400,rotationX:0,rotationY:0,sensitivity:.003,inertia:!0,friction:.95,clampX:!0,minRotationX:-.8,maxRotationX:.8}),this.camera.enableMouseControl(this.canvas),this.time=0,this.zOffset=0,this.direction=1,this.canvas.addEventListener("click",()=>{this.direction*=-1}),this.canvas.addEventListener("touchend",t=>{this.camera._isDragging||(this.direction*=-1)})}update(t){super.update(t),this.time+=t,this.zOffset+=e.speed*t*this.direction,this.camera.update(t)}render(){const t=this.ctx,g=this.width,m=this.height,b=Math.round(g/2),f=Math.round(m/2);t.fillStyle="rgba(0, 0, 0, 0.15)",t.fillRect(0,0,g,m);const c=[],r=e.ringCount*e.ringSpacing;for(let i=0;i<e.ringCount;i++){let s=(i*e.ringSpacing-this.zOffset)%r;if(s<0&&(s+=r),s<20)continue;const a=this.time*e.twistSpeed+s*.002,d=Math.sin(this.time*e.wobbleSpeed+s*.01)*e.wobbleAmount,y=Math.cos(this.time*e.wobbleSpeed*.7+s*.01)*e.wobbleAmount*.6,M=1+Math.sin(this.time*e.pulseSpeed+s*.02)*.1,w=e.baseRadius*M;for(let p=0;p<e.circlesPerRing;p++){const x=p/e.circlesPerRing*Math.PI*2+a,R=Math.cos(x)*w+d,v=Math.sin(x)*w+y,n=this.camera.project(R,v,s),z=Math.max(2,12*n.scale),C=1-s/r,P=35+C*20,$=Math.min(1,C*1.5);c.push({x:b+n.x,y:f+n.y,radius:z,z:n.z,lightness:P,alpha:$})}}c.sort((i,s)=>s.z-i.z);for(const i of c){if(i.alpha<.05)continue;const s=t.createRadialGradient(i.x,i.y,0,i.x,i.y,i.radius*2),a=`hsl(${e.hue}, 100%, ${i.lightness}%)`,d=`hsla(${e.hue}, 100%, ${i.lightness}%, 0)`;s.addColorStop(0,a),s.addColorStop(.4,a),s.addColorStop(1,d),t.beginPath(),t.arc(i.x,i.y,i.radius*2,0,Math.PI*2),t.fillStyle=s,t.globalAlpha=i.alpha,t.fill()}t.globalAlpha=1;const S=this.camera.project(0,0,200),l=b+S.x,h=f+S.y,o=t.createRadialGradient(l,h,0,l,h,150);o.addColorStop(0,`hsla(${e.hue}, 100%, 50%, 0.4)`),o.addColorStop(.5,`hsla(${e.hue}, 100%, 45%, 0.15)`),o.addColorStop(1,`hsla(${e.hue}, 100%, 40%, 0)`),t.beginPath(),t.arc(l,h,150,0,Math.PI*2),t.fillStyle=o,t.fill()}}function I(u){const t=new A(u);return t.start(),{stop:()=>t.stop(),game:t}}export{I as default};
