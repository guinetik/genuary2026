import{CONFIG as a}from"./day31.config-DDGTRykT.js";class M{constructor(t,s,e,h){this.x=t,this.y=s,this.vx=e,this.vy=h,this.angle=Math.atan2(h,e),this.wingPhase=Math.random()*Math.PI*2}update(t,s){if(s.length>1){let n=0,r=0;for(const o of s)n+=o.x,r+=o.y;n/=s.length,r/=s.length,this.vx+=(n-this.x)*.3*t,this.vy+=(r-this.y)*.3*t}const e=Math.sqrt(this.vx*this.vx+this.vy*this.vy);e>a.birdSpeed*1.3&&(this.vx=this.vx/e*a.birdSpeed,this.vy=this.vy/e*a.birdSpeed),this.x+=this.vx*t,this.y+=this.vy*t;let i=Math.atan2(this.vy,this.vx)-this.angle;for(;i>Math.PI;)i-=Math.PI*2;for(;i<-Math.PI;)i+=Math.PI*2;this.angle+=i*.1,this.wingPhase+=t*10}render(t){const s=a.birdSize,e=Math.sin(this.wingPhase)*.4;t.save(),t.translate(this.x,this.y),t.rotate(this.angle),t.strokeStyle="rgba(0, 200, 80, 0.8)",t.lineWidth=2,t.lineCap="round",t.beginPath(),t.moveTo(-s,-s*(.5+e)),t.lineTo(0,0),t.lineTo(-s,s*(.5+e)),t.stroke(),t.restore()}}class f{constructor(t,s,e,h,i){this.birds=[],this.active=!0;const n=e-t,r=h-s,o=Math.sqrt(n*n+r*r),g=n/o*a.birdSpeed,y=r/o*a.birdSpeed;for(let d=0;d<i;d++){const p=(Math.random()-.5)*40,b=(Math.random()-.5)*30,l=.9+Math.random()*.2;this.birds.push(new M(t+p,s+b,g*l,y*l))}}update(t,s,e){for(const i of this.birds)i.update(t,this.birds);const h=100;this.active=this.birds.some(i=>i.x>-h&&i.x<s+h&&i.y>-h&&i.y<e+h)}render(t){for(const s of this.birds)s.render(t)}}export{f as BirdFlock};
