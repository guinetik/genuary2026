import{G as I,P as w,C as D,ad as H,c as C,b as S}from"./index-CyJvuFm5.js";const o={QUARK:"quark",PROTON:"proton",NEUTRON:"neutron",HYDROGEN:"hydrogen",DEUTERIUM:"deuterium",HELIUM3:"helium3",HELIUM4:"helium4",PHOTON:"photon"},b={QUARK_TO_PROTON:{reactants:[o.QUARK,o.QUARK,o.QUARK],products:[o.PROTON],photonEnergy:.94,probability:.95,minEnergy:.001,tripleCollision:!0},QUARK_TO_NEUTRON:{reactants:[o.QUARK,o.QUARK,o.QUARK],products:[o.NEUTRON],photonEnergy:.94,probability:.95,minEnergy:.001,tripleCollision:!0},PROTON_NEUTRON_FUSION:{reactants:[o.PROTON,o.NEUTRON],products:[o.DEUTERIUM],photonEnergy:2.22,probability:.7,minEnergy:.05},DEUTERIUM_PROTON_FUSION:{reactants:[o.DEUTERIUM,o.PROTON],products:[o.HELIUM3],photonEnergy:5.49,probability:.04,minEnergy:.15},DEUTERIUM_NEUTRON_FUSION:{reactants:[o.DEUTERIUM,o.NEUTRON],products:[o.HELIUM3],photonEnergy:6.26,probability:.04,minEnergy:.15},HELIUM3_NEUTRON_FUSION:{reactants:[o.HELIUM3,o.NEUTRON],products:[o.HELIUM4],photonEnergy:20.58,probability:.4,minEnergy:.1},HELIUM3_PROTON_FUSION:{reactants:[o.HELIUM3,o.PROTON],products:[o.HELIUM4],photonEnergy:19.8,probability:.05,minEnergy:.4},DEUTERIUM_DEUTERIUM_FUSION_A:{reactants:[o.DEUTERIUM,o.DEUTERIUM],products:[o.HELIUM3,o.NEUTRON],photonEnergy:3.27,probability:.02,minEnergy:.25},DEUTERIUM_DEUTERIUM_FUSION_B:{reactants:[o.DEUTERIUM,o.DEUTERIUM],products:[o.HELIUM4],photonEnergy:23.8,probability:.01,minEnergy:.35}};class E{static attract(t,i,n=100,s=1){const a=i.x-t.x,c=i.y-t.y,h=(i.z||0)-(t.z||0),e=a*a+c*c+h*h,r=Math.sqrt(e)||s,f=Math.max(r,s),m=n/(f*f);return{fx:a/r*m,fy:c/r*m,fz:h/r*m,dist:r}}static checkCollision(t,i,n=1){const s=i.x-t.x,a=i.y-t.y,c=(i.z||0)-(t.z||0),h=Math.sqrt(s*s+a*a+c*c),e=((t.size||1)+(i.size||1))*n;return h<e?{dist:h,overlap:e-h,dx:s,dy:a,dz:c}:null}static elasticCollision(t,i,n,s=.9){const a=t.mass||1,c=i.mass||1,h=a+c,e=n.dist||1,r=n.dx/e,f=n.dy/e,m=n.dz/e,d=t.vx-i.vx,y=t.vy-i.vy,u=(t.vz||0)-(i.vz||0),x=d*r+y*f+u*m;if(x<0)return null;const p=-(1+s)*x/h;return{v1:{vx:t.vx+p*c*r,vy:t.vy+p*c*f,vz:(t.vz||0)+p*c*m},v2:{vx:i.vx-p*a*r,vy:i.vy-p*a*f,vz:(i.vz||0)-p*a*m}}}static boundsCollision(t,i,n=.9){const s=(t.size||1)/2;let a=!1;const c=i.minX+s,h=i.maxX-s,e=i.minY+s,r=i.maxY-s;return t.x<c?(t.x=c,t.vx<0&&(t.vx=-t.vx*n),a=!0):t.x>h&&(t.x=h,t.vx>0&&(t.vx=-t.vx*n),a=!0),t.y<e?(t.y=e,t.vy<0&&(t.vy=-t.vy*n),a=!0):t.y>r&&(t.y=r,t.vy>0&&(t.vy=-t.vy*n),a=!0),a}static createAttractUpdater(t,i=100){return(n,s)=>{const a=E.attract(n,t,i);n.vx+=a.fx*s,n.vy+=a.fy*s,n.vz=(n.vz||0)+a.fz*s}}static createMutualAttractionUpdater(t,i=100){return(n,s)=>{const a=t();for(const c of a){if(c===n||c.dead)continue;const h=E.attract(n,c,i);n.vx+=h.fx*s,n.vy+=h.fy*s,n.vz=(n.vz||0)+h.fz*s}}}static kineticEnergy(t){const i=(t.vx||0)**2+(t.vy||0)**2+(t.vz||0)**2;return .5*(t.mass||1)*i}static findReaction(t,i){for(const[n,s]of Object.entries(b)){const[a,c]=s.reactants;if(t===a&&i===c||t===c&&i===a)return{name:n,...s}}return null}static checkFusion(t,i,n){if(!t.type||!i.type)return null;const s=E.findReaction(t.type,i.type);if(!s)return null;const c=(E.kineticEnergy(t)+E.kineticEnergy(i))/1e4;if(c<s.minEnergy)return null;const h=Math.min(1,c/s.minEnergy-1)*.2,e=Math.min(.95,s.probability+h);return{reaction:s,probability:e,totalEnergy:c}}static performFusion(t,i,n){const{reaction:s}=n,a=[],c=t.mass||1,h=i.mass||1,e=c*t.vx+h*i.vx,r=c*t.vy+h*i.vy,f=c*(t.vz||0)+h*(i.vz||0),m=c+h,d=(t.x*c+i.x*h)/m,y=(t.y*c+i.y*h)/m,u=((t.z||0)*c+(i.z||0)*h)/m,x=Math.random()*Math.PI*2,p=200+s.photonEnergy*20,g=Math.cos(x)*p*.1,v=Math.sin(x)*p*.1,l=e-g,R=r-v,z=f;for(const U of s.products){const M=E.getMass(U);a.push({type:U,x:d,y,z:u,vx:l/M,vy:R/M,vz:z/M,mass:M,size:E.getSize(U),isNew:!0,lifetime:99999,stable:!0})}return a.push({type:o.PHOTON,x:d,y,z:u,originX:d,originY:y,originZ:u,vx:Math.cos(x)*p,vy:Math.sin(x)*p,vz:0,mass:0,size:2+s.photonEnergy*.3,energy:s.photonEnergy,isPhoton:!0,lifetime:.4}),a}static getMass(t){return{[o.QUARK]:.33,[o.PROTON]:1,[o.NEUTRON]:1,[o.HYDROGEN]:1,[o.DEUTERIUM]:2,[o.HELIUM3]:3,[o.HELIUM4]:4,[o.PHOTON]:0}[t]||1}static getSize(t){return{[o.QUARK]:3,[o.PROTON]:5,[o.NEUTRON]:5,[o.HYDROGEN]:6,[o.DEUTERIUM]:7,[o.HELIUM3]:8,[o.HELIUM4]:9,[o.PHOTON]:2}[t]||5}static getColor(t){return{[o.QUARK]:{r:255,g:255,b:255,a:1},[o.PROTON]:{r:255,g:80,b:80,a:1},[o.NEUTRON]:{r:80,g:140,b:255,a:1},[o.HYDROGEN]:{r:255,g:200,b:100,a:1},[o.DEUTERIUM]:{r:100,g:255,b:100,a:1},[o.HELIUM3]:{r:255,g:100,b:255,a:1},[o.HELIUM4]:{r:255,g:255,b:100,a:1},[o.PHOTON]:{r:255,g:220,b:80,a:1}}[t]||{r:255,g:255,b:255,a:1}}static findTripleReaction(t){if(t.length!==3)return null;const i=t.map(n=>n.type).sort();for(const[n,s]of Object.entries(b)){if(!s.tripleCollision)continue;const a=[...s.reactants].sort();if(i.every((c,h)=>c===a[h]))return{name:n,...s}}return null}static checkTripleCollision(t,i,n=1.5){if(i.length<2)return null;i.sort((f,m)=>f.dist-m.dist);const s=i[0].p,a=i[1].p,c=30*n,h=i[0].dist,e=i[1].dist,r=Math.sqrt((a.x-s.x)**2+(a.y-s.y)**2+((a.z||0)-(s.z||0))**2);return h<c&&e<c&&r<c?[t,s,a]:null}static performTripleFusion(t,i){const n=[];let s=0,a=0,c=0,h=0,e=0,r=0,f=0;for(const v of t){const l=v.mass||1;f+=l,s+=l*v.vx,a+=l*v.vy,c+=l*(v.vz||0),h+=v.x*l,e+=v.y*l,r+=(v.z||0)*l}h/=f,e/=f,r/=f;const m=Math.random()*Math.PI*2,d=150+i.photonEnergy*30,y=Math.cos(m)*d*.1,u=Math.sin(m)*d*.1;E.getMass(i.products[0]);const x=s-y,p=a-u,g=c;for(const v of i.products){const l=E.getMass(v);n.push({type:v,x:h,y:e,z:r,vx:x/l,vy:p/l,vz:g/l,mass:l,size:E.getSize(v),isNew:!0,lifetime:99999,stable:!0})}return n.push({type:o.PHOTON,x:h,y:e,z:r,originX:h,originY:e,originZ:r,vx:Math.cos(m)*d,vy:Math.sin(m)*d,vz:0,mass:0,size:2+i.photonEnergy*.3,energy:i.photonEnergy,isPhoton:!0,lifetime:.4}),n}static drawSquigglyLine(t,i,n,s,a,c=1.5,h=12,e=1){const r=s-i,f=a-n,m=Math.sqrt(r*r+f*f);if(m<3)return;const d=25;if(m>d){const l=d/m;i=s-r*l,n=a-f*l}const y=s-i,u=a-n,x=Math.sqrt(y*y+u*u),p=-u/x,g=y/x;t.beginPath(),t.strokeStyle=`rgba(255, 255, 150, ${e*.6})`,t.lineWidth=.8;const v=Math.max(8,Math.floor(x/2));for(let l=0;l<=v;l++){const R=l/v,z=i+y*R,U=n+u*R,M=Math.sin(R*Math.PI*2*h)*c,P=z+p*M,N=U+g*M;l===0?t.moveTo(P,N):t.lineTo(P,N)}t.stroke()}}const T={quarkDensity:.0015,minQuarks:60,maxQuarks:3e3,quarkSpeed:600,expansionTime:2,initialSpaceSize:.05,finalSpaceSize:.95,initialTemp:1,coolingRate:.05,minTemp:.1,targetDHRatio:26/1e3,protonRatio:.88,thermalJitter:80,heatTransferRate:.1,heatTransferRange:30};class A extends I{constructor(t){super(t),this.backgroundColor=null,this.nextParticleId=0,this.elapsedTime=0,this.physicsEnabled=!1,this.universeTemp=T.initialTemp,this.spaceSize=T.initialSpaceSize,this.cleanupTimer=0,this.currentDHRatio=0,this.dhLimitReached=!1}updateDHRatio(){const t=this.particles.particles;let i=0,n=0;for(const s of t)s.dead||(s.type===o.PROTON?i++:s.type===o.DEUTERIUM&&n++);this.currentDHRatio=i>0?n/i:0,this.dhLimitReached=this.currentDHRatio>=T.targetDHRatio}getCurrentBounds(){const t=this.width/2*this.spaceSize,i=this.height/2*this.spaceSize;return{minX:-t,maxX:t,minY:-i,maxY:i}}init(){if(this._initialized)return;this._initialized=!0,super.init(),w.init(this.ctx),this.camera=new D({perspective:800,rotationX:0,rotationY:0}),this.scene3d=new H(this,{x:this.width/2,y:this.height/2,camera:this.camera}),this.bounds={minX:-this.width/2+20,maxX:this.width/2-20,minY:-this.height/2+20,maxY:this.height/2-20},this.spawnQueue=[],this.processedTriples=new Set;const t=this.width*this.height,i=Math.min(T.maxQuarks,Math.max(T.minQuarks,t*T.quarkDensity)),n=Math.floor(i*1.5);this.particles=new C(this,{camera:this.camera,maxParticles:n,depthSort:!1,updaters:[(e,r)=>{e.x+=e.vx*r,e.y+=e.vy*r,e.z=(e.z||0)+(e.vz||0)*r},(e,r)=>{e.isPhoton&&!e.stable&&(e.lifetime-=r,e.alpha=Math.max(0,e.lifetime/2),e.lifetime<=0&&(e.dead=!0)),e.age=(e.age||0)+r,e.dead&&(e.alpha=0,e.size=0)},(e,r,f)=>{if(!this.physicsEnabled||e.isPhoton)return;const m=f.particles,d=e.type===o.QUARK?5e3:800;for(const y of m){if(y===e||y.dead||y.isPhoton)continue;const u=e.type===o.QUARK&&y.type===o.QUARK?d:800,x=E.attract(e,y,u,3);e.vx+=x.fx*r,e.vy+=x.fy*r}},(e,r,f)=>{if(!this.physicsEnabled||e.dead||e.type!==o.QUARK)return;const m=f.particles.filter(x=>x!==e&&!x.dead&&x.type===o.QUARK),d=[],y=25;for(const x of m){const p=x.x-e.x,g=x.y-e.y,v=(x.z||0)-(e.z||0),l=Math.sqrt(p*p+g*g+v*v);l<y&&d.push({p:x,dist:l})}const u=E.checkTripleCollision(e,d,4);if(u){const p=u.map(g=>g.id||f.particles.indexOf(g)).sort().join("-");if(!this.processedTriples.has(p)){this.processedTriples.add(p);const g=Math.random()<T.protonRatio?b.QUARK_TO_PROTON:b.QUARK_TO_NEUTRON,v=E.performTripleFusion(u,g);this.spawnQueue.push(...v),u.forEach(R=>R.dead=!0);const l=g.products[0];console.log(`HADRONIZATION: 3 quarks → ${l} + photon`)}}},(e,r,f)=>{if(!this.physicsEnabled||e.isPhoton||e.dead||e.type===o.QUARK)return;const m=f.particles;for(const d of m){if(d===e||d.dead||d.isPhoton||d.type===o.QUARK)continue;const y=E.checkCollision(e,d,1);if(y){const u=E.checkFusion(e,d,y);if(u&&u.reaction.products.includes(o.DEUTERIUM)&&this.dhLimitReached){const g=E.elasticCollision(e,d,y,.9);g&&(e.vx=g.v1.vx,e.vy=g.v1.vy,d.vx=g.v2.vx,d.vy=g.v2.vy);continue}if(u&&Math.random()<u.probability){const g=E.performFusion(e,d,u);this.spawnQueue.push(...g),e.dead=!0,d.dead=!0,console.log(`FUSION: ${e.type} + ${d.type} → ${u.reaction.products.join(" + ")} + photon`);return}const p=E.elasticCollision(e,d,y,.9);if(p){e.vx=p.v1.vx,e.vy=p.v1.vy,d.vx=p.v2.vx,d.vy=p.v2.vy;const g=y.overlap*.5,v=y.dist||1;e.x-=y.dx/v*g,e.y-=y.dy/v*g,d.x+=y.dx/v*g,d.y+=y.dy/v*g}}}},(e,r)=>{if(!e.isPhoton){const f=this.getCurrentBounds(),m=.95+this.universeTemp*.05;E.boundsCollision(e,f,m)}},(e,r,f)=>{if(e.isPhoton||e.dead)return;e.temperature===void 0&&(e.temperature=this.universeTemp);const m=this.universeTemp-e.temperature;e.temperature+=m*.1;const d=T.thermalJitter*e.temperature;if(e.vx+=(Math.random()-.5)*d*r*60,e.vy+=(Math.random()-.5)*d*r*60,this.physicsEnabled){const y=f.particles;for(const u of y){if(u===e||u.dead||u.isPhoton||u.temperature===void 0)continue;const x=u.x-e.x,p=u.y-e.y;if(Math.sqrt(x*x+p*p)<T.heatTransferRange){const v=(u.temperature-e.temperature)*T.heatTransferRate*r;e.temperature+=v}}}},(e,r)=>{e.isPhoton||(e.vx=Math.max(-800,Math.min(800,e.vx)),e.vy=Math.max(-800,Math.min(800,e.vy)),this.dhLimitReached&&(e.vx*=.995,e.vy*=.995))},(e,r,f)=>{if(e.isPhoton||e.dead||!this.dhLimitReached)return;const m=f.particles,d=50,y=150,u=15;for(const x of m){if(x===e||x.dead||x.isPhoton)continue;const p=x.x-e.x,g=x.y-e.y,v=p*p+g*g,l=Math.sqrt(v)||u;if(l<u||l>200)continue;const R=e.type===x.type,z=d+(R?y:0),U=(e.mass||1)*(x.mass||1),M=z*U/v;e.vx+=p/l*M*r,e.vy+=g/l*M*r}}]});const s=E.getColor(o.QUARK),a=E.getSize(o.QUARK);this.particles.addEmitter("quark",new S({rate:0,position:{x:0,y:0,z:0},spread:{x:0,y:0,z:0},velocity:{x:0,y:0,z:0},velocitySpread:{x:1,y:1,z:0},lifetime:{min:999,max:999},size:{min:a,max:a},color:s,shape:"circle"}));const c=Math.floor(i);console.log(`Canvas: ${this.width}x${this.height}, spawning ${c} quarks`),this.particles.burst(c,"quark");const h=this.particles.particles;this.nextParticleId=h.length;for(let e=0;e<h.length;e++){const r=h[e];r.type=o.QUARK,r.mass=E.getMass(o.QUARK),r.id=e,r.temperature=T.initialTemp,r.stable=!0,r.lifetime=99999,r.age=0;const f=Math.random()*Math.PI*2,m=T.quarkSpeed*(.7+Math.random()*.6);r.vx=Math.cos(f)*m,r.vy=Math.sin(f)*m,r.x=0,r.y=0,r.z=0}this.particles.addEmitter("spawn",new S({rate:0,position:{x:0,y:0,z:0},velocity:{x:0,y:0,z:0},velocitySpread:{x:0,y:0,z:0},lifetime:{min:999,max:999},size:{min:8,max:8},color:{r:255,g:255,b:255,a:1},shape:"circle"})),this.scene3d.add(this.particles),this.pipeline.add(this.scene3d)}cleanupDeadParticles(){const t=this.particles.particles,i=t.length;let n=0;for(let a=0;a<t.length;a++){const c=t[a];c.dead||(n!==a&&(t[n]=c),n++)}t.length=n;const s=i-n;s>0&&console.log(`Cleaned up ${s} dead particles`)}spawnParticle(t){const i=this.particles.emitters.get("spawn");if(!i)return;i.position={x:t.x,y:t.y,z:t.z||0},i.velocity={x:t.vx,y:t.vy,z:t.vz||0},i.size={min:t.size,max:t.size},i.color=E.getColor(t.type),i.lifetime={min:t.lifetime||999,max:t.lifetime||999},this.particles.burst(1,"spawn");const n=this.particles.particles[this.particles.particles.length-1];n&&(n.type=t.type,n.mass=t.mass,n.isPhoton=t.isPhoton||!1,n.lifetime=t.lifetime||99999,n.age=0,n.energy=t.energy||0,n.isNew=t.isNew||!1,n.stable=t.stable||!t.isPhoton,n.id=this.nextParticleId++,n.temperature=this.universeTemp,t.originX!==void 0&&(n.originX=t.originX,n.originY=t.originY,n.originZ=t.originZ||0))}update(t){if(super.update(t),this.elapsedTime+=t,!this.physicsEnabled){const s=Math.min(1,this.elapsedTime/T.expansionTime),a=1-Math.pow(1-s,3);this.spaceSize=T.initialSpaceSize+(T.finalSpaceSize-T.initialSpaceSize)*a}for(!this.physicsEnabled&&this.elapsedTime>=T.expansionTime&&(this.physicsEnabled=!0,this.spaceSize=T.finalSpaceSize,console.log("Physics enabled! Hadronization can begin.")),this.physicsEnabled&&(this.universeTemp=Math.max(T.minTemp,this.universeTemp-T.coolingRate*t)),this.processedTriples.clear();this.spawnQueue.length>0;){const s=this.spawnQueue.shift();this.spawnParticle(s)}this.cleanupTimer+=t,this.cleanupTimer>=.5&&(this.cleanupTimer=0,this.cleanupDeadParticles()),this.updateDHRatio();const i=this.getCurrentBounds(),n=.95+this.universeTemp*.05;for(const s of this.particles.particles)s.dead||s.isPhoton||(s.x<i.minX&&(s.x=i.minX,s.vx=Math.abs(s.vx)*n),s.x>i.maxX&&(s.x=i.maxX,s.vx=-Math.abs(s.vx)*n),s.y<i.minY&&(s.y=i.minY,s.vy=Math.abs(s.vy)*n),s.y>i.maxY&&(s.y=i.maxY,s.vy=-Math.abs(s.vy)*n))}renderCosmicBackground(){const t=this.ctx,i=this.width/2,n=this.height/2,s=this.universeTemp,a=this.getCurrentBounds(),c=a.maxX-a.minX,h=a.maxY-a.minY,e=Math.max(c,h)/2;t.fillStyle="#000",t.fillRect(0,0,this.width,this.height),t.save(),t.beginPath(),t.rect(i+a.minX,n+a.minY,c,h),t.clip();const r=t.createRadialGradient(i,n,0,i,n,e);let f,m,d;if(s>.7){const u=(s-.7)/.3;f=200+55*(1-u),m=220+35*(1-u),d=255}else if(s>.4){const u=(s-.4)/.3;f=255,m=180+40*u,d=100*u}else if(s>.2){const u=(s-.2)/.2;f=255,m=100+80*u,d=0}else{const u=s/.2;f=150+105*u,m=30*u,d=0}const y=.6*Math.max(.1,s);r.addColorStop(0,`rgba(${Math.floor(f)}, ${Math.floor(m)}, ${Math.floor(d)}, ${y})`),r.addColorStop(.5,`rgba(${Math.floor(f*.7)}, ${Math.floor(m*.4)}, ${Math.floor(d*.3)}, ${y*.4})`),r.addColorStop(1,`rgba(${Math.floor(f*.3)}, ${Math.floor(m*.1)}, 0, ${y*.1})`),t.fillStyle=r,t.fillRect(0,0,this.width,this.height),t.restore(),t.fillStyle=`rgba(0, 0, 0, ${.08+(1-s)*.12})`,t.fillRect(0,0,this.width,this.height)}render(){this.renderCosmicBackground(),this.pipeline.render(this.ctx);const t=this.particles.particles.filter(l=>l.isPhoton&&!l.dead),i=this.width/2,n=this.height/2;for(const l of t)if(l.originX!==void 0){const R=i+l.originX,z=n+l.originY,U=i+l.x,M=n+l.y,P=l.alpha!==void 0?l.alpha:1;E.drawSquigglyLine(this.ctx,R,z,U,M,3,6,P)}if(this.ctx.fillStyle="#fff",this.ctx.font="14px monospace",this.ctx.fillText("Feynman Nucleosynthesis",20,30),this.physicsEnabled)this.dhLimitReached?(this.ctx.fillStyle="#08f",this.ctx.fillText("D/H LIMIT REACHED (clustering)",20,50)):(this.ctx.fillStyle="#0f0",this.ctx.fillText("NUCLEOSYNTHESIS ACTIVE",20,50));else{const l=(T.expansionTime-this.elapsedTime).toFixed(1);this.ctx.fillStyle="#ff0",this.ctx.fillText(`EXPANSION PHASE (${l}s)`,20,50)}const s=(this.universeTemp*100).toFixed(0),a=`rgb(255, ${Math.floor(100+this.universeTemp*155)}, ${Math.floor(this.universeTemp*100)})`;this.ctx.fillStyle=a,this.ctx.fillText(`Universe Temp: ${s}%`,20,70);const c=this.particles.particles.filter(l=>!l.dead),h={};for(const l of c){const R=l.type||"unknown";h[R]=(h[R]||0)+1}const e=[o.QUARK,o.PROTON,o.NEUTRON,o.DEUTERIUM,o.HELIUM3,o.HELIUM4,o.PHOTON];let r=80;this.ctx.fillText("Particles:",20,r),r+=20;for(const l of e)if(h[l]){const R=E.getColor(l);this.ctx.fillStyle=`rgb(${R.r}, ${R.g}, ${R.b})`,this.ctx.fillText(`  ${l}: ${h[l]}`,20,r),r+=18}this.ctx.fillStyle="#fff",r+=10,this.ctx.fillText(`Total: ${c.length}`,20,r);const f=h[o.PROTON]||0,m=h[o.DEUTERIUM]||0;if(f>0){const R=(m/f*1e3).toFixed(1);r+=25,this.ctx.fillStyle="#0ff",this.ctx.fillText(`D/H ratio: ${R}/1000`,20,r),this.ctx.fillStyle="rgba(255,255,255,0.5)",this.ctx.fillText("(target: 26/1000)",20,r+16)}this.ctx.fillStyle="rgba(255,255,255,0.7)";const d=this.height-60;this.ctx.fillText("Chain: quark(white) → proton(red)/neutron(blue)",20,d),this.ctx.fillText("       → deuterium(green) → helium(yellow)",20,d+18),this.ctx.fillText("       Each fusion releases a photon (white flash)",20,d+36);const y=this.getCurrentBounds(),u=i+y.minX,x=n+y.minY,p=y.maxX-y.minX,g=y.maxY-y.minY,v=this.physicsEnabled?.2:.5;this.ctx.strokeStyle=`rgba(255, ${this.physicsEnabled?100:50}, 50, ${v})`,this.ctx.lineWidth=2,this.ctx.strokeRect(u,x,p,g),this.physicsEnabled||(this.ctx.fillStyle="rgba(255,100,100,0.7)",this.ctx.fillText(`Space: ${(this.spaceSize*100).toFixed(0)}%`,this.width-100,30))}stop(){this._initialized=!1,super.stop()}}function k(O){const t=new A(O);return t.start(),{stop:()=>t.stop(),game:t}}export{k as default};
