import{G as m,P as f}from"./gcanvas.es-Cc1M3jca.js";const o={goldenAngle:137.5077640500378,numSeeds:1e3,baseRadius:10,spacing:8,pulseSpeed:1.5,rotationSpeed:.15,waveSpeed:2,waveAmplitude:20,hueSpeed:30,saturation:85,mouseRadius:200,mouseForce:120,explosionForce:400,explosionDecay:.96},u=Math.PI*2,v=o.goldenAngle*Math.PI/180;class M extends m{constructor(s){super(s),this.backgroundColor="#000"}init(){super.init(),f.init(this.ctx),this.time=0,this.hueOffset=0,this.globalRotation=0,this.mouseX=0,this.mouseY=0,this.exploding=!1,this.explosionTime=0,this.seeds=[];for(let s=0;s<o.numSeeds;s++){const e=s*v,i=o.spacing*Math.sqrt(s);this.seeds.push({index:s,baseAngle:e,baseRadius:i,angle:e,radius:i,vx:0,vy:0,size:Math.max(3,o.baseRadius-s*.005),phase:Math.random()*u})}this.canvas.addEventListener("mousemove",s=>{const e=this.canvas.getBoundingClientRect();this.mouseX=s.clientX-e.left-this.width/2,this.mouseY=s.clientY-e.top-this.height/2}),this.canvas.addEventListener("click",()=>{this.explode()}),this.canvas.addEventListener("mouseleave",()=>{this.mouseX=0,this.mouseY=0})}explode(){this.exploding=!0,this.explosionTime=this.time;for(const s of this.seeds){const e=Math.cos(s.angle)*s.radius,i=Math.sin(s.angle)*s.radius,a=Math.sqrt(e*e+i*i)+1,t=o.explosionForce/Math.sqrt(a+50);s.vx=e/a*t+(Math.random()-.5)*50,s.vy=i/a*t+(Math.random()-.5)*50}}update(s){super.update(s),this.time+=s,this.hueOffset+=o.hueSpeed*s,this.globalRotation+=o.rotationSpeed*s;for(const e of this.seeds){let i=Math.cos(e.angle)*e.radius,a=Math.sin(e.angle)*e.radius;if(this.exploding){i+=e.vx*s,a+=e.vy*s,e.vx*=o.explosionDecay,e.vy*=o.explosionDecay;const t=Math.cos(e.baseAngle+this.globalRotation)*e.baseRadius,n=Math.sin(e.baseAngle+this.globalRotation)*e.baseRadius,h=t-i,l=n-a;e.vx+=h*2*s,e.vy+=l*2*s,e.angle=Math.atan2(a+e.vy*s,i+e.vx*s),e.radius=Math.sqrt((i+e.vx*s)**2+(a+e.vy*s)**2),this.time-this.explosionTime>3&&(this.exploding=!1)}else{e.angle=e.baseAngle+this.globalRotation;const t=Math.sin(this.time*o.pulseSpeed+e.index*.02)*.1+1,n=Math.sin(this.time*o.waveSpeed-e.baseRadius*.05)*o.waveAmplitude;e.radius=e.baseRadius*t+n*(e.baseRadius/200);const h=Math.sqrt((i-this.mouseX)**2+(a-this.mouseY)**2);if(h<o.mouseRadius){const l=(o.mouseRadius-h)/o.mouseRadius;Math.atan2(a-this.mouseY,i-this.mouseX),e.radius+=l*o.mouseForce*(1-e.index/o.numSeeds),e.angle+=l*.3*Math.sin(this.time*5)}}}}render(){const s=this.ctx,e=this.width,i=this.height,a=e/2,t=i/2;s.fillStyle="rgba(0, 0, 0, 0.15)",s.fillRect(0,0,e,i),this.drawConnections(s,a,t),this.drawSeeds(s,a,t),this.drawCenter(s,a,t)}drawConnections(s,e,i){s.strokeStyle=`hsla(${this.hueOffset%360}, 70%, 50%, 0.05)`,s.lineWidth=.5,s.beginPath();for(let a=1;a<Math.min(500,this.seeds.length);a++){const t=this.seeds[a],n=this.seeds[a-1],h=e+Math.cos(n.angle)*n.radius,l=i+Math.sin(n.angle)*n.radius,d=e+Math.cos(t.angle)*t.radius,c=i+Math.sin(t.angle)*t.radius;s.moveTo(h,l),s.lineTo(d,c)}s.stroke()}drawSeeds(s,e,i){for(let a=this.seeds.length-1;a>=0;a--){const t=this.seeds[a],n=e+Math.cos(t.angle)*t.radius,h=i+Math.sin(t.angle)*t.radius,l=(t.index*.5+this.hueOffset)%360,d=50+Math.sin(this.time*3+t.phase)*15,c=Math.sin(this.time*4+t.index*.1)*.3+1,p=t.size*c;s.globalCompositeOperation="lighter";const r=s.createRadialGradient(n,h,0,n,h,p*2);r.addColorStop(0,`hsla(${l}, ${o.saturation}%, ${d}%, 0.9)`),r.addColorStop(.5,`hsla(${l}, ${o.saturation}%, ${d-10}%, 0.4)`),r.addColorStop(1,`hsla(${l}, ${o.saturation}%, ${d-20}%, 0)`),s.fillStyle=r,s.beginPath(),s.arc(n,h,p*2,0,u),s.fill(),s.globalCompositeOperation="source-over",s.fillStyle=`hsl(${l}, ${o.saturation}%, ${d+20}%)`,s.beginPath(),s.arc(n,h,p*.5,0,u),s.fill()}}drawCenter(s,e,i){s.globalCompositeOperation="lighter";const t=30*(Math.sin(this.time*2)*.3+1),n=s.createRadialGradient(e,i,0,e,i,t);n.addColorStop(0,`hsla(${this.hueOffset%360}, 100%, 80%, 0.8)`),n.addColorStop(.3,`hsla(${(this.hueOffset+30)%360}, 90%, 60%, 0.4)`),n.addColorStop(1,"transparent"),s.fillStyle=n,s.beginPath(),s.arc(e,i,t,0,u),s.fill(),s.globalCompositeOperation="source-over"}}function S(g){const s=new M(g);return s.start(),{stop:()=>s.stop(),game:s}}export{S as default};
