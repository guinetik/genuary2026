import{T as u,G as j,P as J,p as _,H as q,x as O,J as Y,A as K,L as tt,O as et,Q as z,E as w,o as st}from"./gcanvas.es-CkPclmv-.js";const at="M 155.707 30.955 L 188.99 30.955 L 188.99 38.17 L 155.707 38.17 L 155.707 30.955 Z M 147.561 38.17 L 147.561 30.955 L 151.518 30.955 L 151.518 38.17 L 147.561 38.17 Z M 19.551 34.912 L 60.98 34.912 L 60.98 38.17 L 19.551 38.17 L 19.551 34.912 Z M 62.376 30.955 L 103.572 30.955 L 103.572 32.119 L 62.376 32.119 L 62.376 30.955 Z M 62.376 9.775 L 87.978 9.775 L 87.978 28.395 L 62.376 28.395 L 62.376 9.775 Z M 168.508 9.775 L 188.99 9.775 L 188.99 28.395 L 168.508 28.395 L 168.508 9.775 Z M 125.683 28.395 L 125.683 9.775 L 146.165 9.775 L 146.165 28.395 L 125.683 28.395 Z M 104.736 9.775 L 125.218 9.775 L 125.218 28.395 L 104.736 28.395 L 104.736 9.775 Z M 103.572 9.775 L 103.572 28.395 L 88.211 28.395 L 88.211 9.775 L 103.572 9.775 Z M 103.572 38.17 L 62.376 38.17 L 62.376 34.912 L 103.572 34.912 L 103.572 38.17 Z M 104.736 34.912 L 115.442 34.912 L 115.442 32.352 L 104.736 32.352 L 104.736 30.955 L 146.165 30.955 L 146.165 38.17 L 104.736 38.17 L 104.736 34.912 Z M 147.561 28.395 L 147.561 9.775 L 168.043 9.775 L 168.043 28.395 L 147.561 28.395 Z M 200.86 28.395 L 190.387 28.395 L 190.387 9.775 L 200.86 9.775 L 200.86 28.395 Z M 155.707 38.869 L 209.472 38.869 L 209.472 38.17 L 190.154 38.17 L 190.154 30.955 L 201.093 30.955 L 201.093 28.628 L 201.093 28.395 L 201.093 9.775 L 201.093 7.448 L 201.093 7.215 L 201.093 6.517 L 169.672 6.517 L 169.672 4.655 L 155.707 4.655 L 155.707 0 L 151.751 0 L 151.751 4.655 L 137.786 4.655 L 137.786 6.517 L 50.041 6.517 L 50.041 7.215 L 50.506 7.215 L 50.506 9.775 L 61.213 9.775 L 61.213 28.395 L 50.506 28.395 L 50.506 30.955 L 61.213 30.955 L 61.213 32.119 L 7.681 32.119 L 7.681 34.679 L 18.387 34.679 L 18.387 37.938 L 0 37.938 L 0 38.636 L 151.518 38.636",n={colors:{red:"#E53935",yellow:"#FFCA28",blue:"#1E88E5",black:"#1A1A1A",cream:"#F5F0E6",darkCream:"#E8E0D0"},layers:{background:.05,far:.15,mid:.35,near:.6,front:.85},parallaxSmoothing:.08,entranceDuration:.6,margin:.08,houseReserve:.25,textReserve:.12,maxParallaxOffset:.04,houseWidth:.65};class it extends st{constructor(t,s,e={}){super(t,e),this.shape=s,this.baseX=e.baseX||.5,this.baseY=e.baseY||.5,this.depth=e.depth||.5,this.delay=e.delay||0,this.normX=this.baseX,this.normY=this.baseY,this.x=this.baseX*t.width,this.y=this.baseY*t.height,this.scaleX=0,this.scaleY=0,this.rotationSpeed=e.rotationSpeed||0,this.breatheSpeed=e.breatheSpeed||0,this.breatheAmount=e.breatheAmount||0,this.baseRotation=s.rotation||0,this.time=Math.random()*100}animateEntrance(){this.scaleX=0,this.scaleY=0,u.to(this,{scaleX:1,scaleY:1},n.entranceDuration,w.easeOutBack,{delay:this.delay})}reset(){u.killTarget(this),this.scaleX=0,this.scaleY=0}update(t){super.update(t),this.time+=t;const s=this.game.mouseOffsetX||0,e=this.game.mouseOffsetY||0,o=s*this.depth*n.maxParallaxOffset,r=e*this.depth*n.maxParallaxOffset,i=this.baseX+o,d=this.baseY+r;this.normX+=(i-this.normX)*n.parallaxSmoothing,this.normY+=(d-this.normY)*n.parallaxSmoothing,this.x=this.normX*this.game.width,this.y=this.normY*this.game.height,this.rotationSpeed!==0&&(this.shape.rotation=this.baseRotation+this.time*this.rotationSpeed)}draw(){super.draw(),this.shape.x=this.x,this.shape.y=this.y;const t=this.breatheAmount>0?1+Math.sin(this.time*this.breatheSpeed)*this.breatheAmount:1;this.shape.scaleX=this.scaleX*t,this.shape.scaleY=this.scaleY*t,this.shape.draw()}}class ht extends j{constructor(t){super(t),this.backgroundColor=n.colors.cream}init(){super.init(),J.init(this.ctx),u.killAll(),this.mouseX=this.width/2,this.mouseY=this.height/2,this.targetMouseX=this.width/2,this.targetMouseY=this.height/2,this.mouseOffsetX=0,this.mouseOffsetY=0,this.scene=new _(this,{anchor:"top-left"}),this.parallaxShapes=[],this.textSlideY=30,this.textOpacity=0,this.dateSlideY=20,this.dateOpacity=0,this.houseProgress=0,this.createHouseShape(),this.generateComposition(),this.startEntranceAnimations(),this.animateText(),this.pipeline.add(this.scene),this.canvas.addEventListener("mousemove",t=>{const s=this.canvas.getBoundingClientRect();this.targetMouseX=t.clientX-s.left,this.targetMouseY=t.clientY-s.top}),this.canvas.addEventListener("mouseleave",()=>{this.targetMouseX=this.width/2,this.targetMouseY=this.height/2}),this.canvas.addEventListener("click",()=>{this.regenerate()}),this.canvas.addEventListener("touchmove",t=>{const s=this.canvas.getBoundingClientRect(),e=t.touches[0];this.targetMouseX=e.clientX-s.left,this.targetMouseY=e.clientY-s.top},{passive:!0}),this.canvas.addEventListener("touchend",()=>{this.regenerate()})}createHouseShape(){const t=Math.min(this.width,this.height)*n.margin;this.height*n.textReserve;const e=this.width*n.houseWidth/209,o=39*e,r=this.width/2,i=this.height-o/2-t;this.houseShape=new q(at,{x:r,y:i,stroke:n.colors.black,lineWidth:2,color:null,scale:e,centerPath:!0,animationProgress:0})}generateComposition(){this.parallaxShapes=[];const{colors:t,layers:s,margin:e,houseReserve:o,maxParallaxOffset:r}=n,i=Math.min(this.width,this.height),d=[t.red,t.yellow,t.blue],f=[t.red,t.yellow,t.blue,t.black],Z=[t.black,t.darkCream,t.cream],L=a=>a[Math.floor(Math.random()*a.length)],h=(a,l)=>a+Math.random()*(l-a),y=(a,l)=>Math.floor(h(a,l+1)),I=e+r,W=1-e-r,F=e+r,D=1-o-r,X=a=>{const l=a*.5;return{x:h(I+l,W-l),y:h(F+l,D-l)}},S=1.5,N=[{depth:s.background,count:[2,3],sizeRange:[.2,.35],delayBase:S},{depth:s.far,count:[2,4],sizeRange:[.1,.2],delayBase:S},{depth:s.mid,count:[3,5],sizeRange:[.05,.12],delayBase:S},{depth:s.near,count:[2,4],sizeRange:[.03,.08],delayBase:S},{depth:s.front,count:[2,4],sizeRange:[.02,.05],delayBase:S}];for(const a of N){const l=y(a.count[0],a.count[1]);for(let g=0;g<l;g++){const b=h(a.sizeRange[0],a.sizeRange[1]),c=b*i,E=X(b),Q=a.delayBase,P=L([0,Math.PI/4,Math.PI/2,-Math.PI/4])+h(-.1,.1),U=y(0,7);let p;const m=a.depth<.2?L(Z):L(a.depth>.7?f:d),V=a.depth>.5&&Math.random()<.3?h(-.1,.1):0,T=a.depth>.3&&Math.random()<.4?h(.5,1.5):0,$=T>0?h(.02,.05):0;switch(U){case 0:p=new O(c*.5,{color:m});break;case 1:const B=Math.random()<.25;p=new Y({width:B?c*h(1.5,2.5):c,height:B?c*.08:c*h(.6,1.4),color:m,rotation:P});break;case 2:p=new z(c*.6,{color:m,rotation:P});break;case 3:p=new et(c*.5,c*.3,{color:m});break;case 4:const H=L([0,Math.PI/2,Math.PI,Math.PI*1.5]);p=new tt(c*.5,H,H+Math.PI,{color:m,rotation:P});break;case 5:p=new K(c*.5,0,Math.PI*h(.5,1.5),{stroke:L(d),lineWidth:h(2,5)});break;case 6:p=new Y({width:c*.7,height:c*.7,color:m,rotation:Math.PI/4});break;default:p=new O(c*.3,{color:m})}this.addShapeWithAnimation(p,E.x,E.y,a.depth,Q,{rotationSpeed:V,breatheSpeed:T,breatheAmount:$})}}const G=y(2,3);for(let a=0;a<G;a++){const l=Math.random()<.5,g=h(.25,.4),b=X(g);this.addShapeWithAnimation(new Y({width:l?i*.01:i*g,height:l?i*g:i*.01,color:t.black}),b.x,b.y,s.mid,h(.3,.4),{})}const k=L(d),v=y(0,2),R=h(.12,.18),M=i*R,C=X(R);let x;v===0?x=new O(M,{color:k}):v===1?x=new Y({width:M*1.1,height:M*h(.9,1.3),color:k}):x=new z(M,{color:k}),this.addShapeWithAnimation(x,C.x,C.y,s.far,.15,{breatheSpeed:.8,breatheAmount:.02})}addShapeWithAnimation(t,s,e,o,r,i={}){const d=new it(this,t,{baseX:s,baseY:e,depth:o,delay:r,rotationSpeed:i.rotationSpeed||0,breatheSpeed:i.breatheSpeed||0,breatheAmount:i.breatheAmount||0});this.parallaxShapes.push(d),this.scene.add(d)}startEntranceAnimations(){for(const t of this.parallaxShapes)t.animateEntrance()}animateText(){this.textSlideY=30,this.textOpacity=0,this.dateSlideY=20,this.dateOpacity=0,this.houseProgress=0,u.to(this,{houseProgress:1},1.5,w.easeInOutQuad),u.to(this,{textSlideY:0,textOpacity:1},.8,w.easeOutCubic,{delay:2}),u.to(this,{dateSlideY:0,dateOpacity:1},.6,w.easeOutCubic,{delay:2.3})}regenerate(){u.killAll(),this.createHouseShape(),this.scene.clear(),this.generateComposition(),this.startEntranceAnimations(),this.animateText()}update(t){super.update(t),this.mouseX+=(this.targetMouseX-this.mouseX)*.1,this.mouseY+=(this.targetMouseY-this.mouseY)*.1,this.mouseOffsetX=(this.mouseX-this.width/2)/(this.width/2),this.mouseOffsetY=(this.mouseY-this.height/2)/(this.height/2)}render(){const t=this.ctx,s=this.width,e=this.height;super.render(),this.renderFarnsworthHouse(t,s,e);const o=Math.min(s,e)*n.margin;t.strokeStyle=n.colors.black,t.lineWidth=3,t.strokeRect(o,o,s-o*2,e-o*2),this.renderBauhausText(t,s,e)}renderFarnsworthHouse(t,s,e){!this.houseShape||this.houseProgress<=0||(this.houseShape.setAnimationProgress(this.houseProgress),this.houseShape.render())}renderBauhausText(t,s,e){const{colors:o}=n,r=e*.95,i=Math.min(s,e)*.022,d=s*.5;if(this.textOpacity>0){t.save(),t.globalAlpha=this.textOpacity;const f=r+this.textSlideY;t.fillStyle=o.black,t.font=`bold ${i*2.2}px 'Helvetica Neue', Helvetica, Arial, sans-serif`,t.textAlign="center",t.textBaseline="middle",t.fillText("BAUHAUS",d,f),t.restore()}if(this.dateOpacity>0){t.save(),t.globalAlpha=this.dateOpacity*.6;const f=r+i*1.6+this.dateSlideY;t.fillStyle=o.black,t.font=`300 ${i*.65}px 'Helvetica Neue', Helvetica, Arial, sans-serif`,t.textAlign="center",t.textBaseline="middle",t.fillText("1919 â€” 1933",d,f),t.restore()}}onResize(){this.targetMouseX=this.width/2,this.targetMouseY=this.height/2,this.mouseX=this.width/2,this.mouseY=this.height/2,this.createHouseShape(),u.killAll(),this.scene.clear(),this.generateComposition(),this.startEntranceAnimations(),this.animateText()}destroy(){var t;u.killAll(),this.houseShape=null,(t=super.destroy)==null||t.call(this)}}function nt(A){const t=new ht(A);return t.start(),{stop:()=>{u.killAll(),t.stop()},game:t}}export{nt as default};
