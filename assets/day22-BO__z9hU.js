import{G as I,P as L,K as n,V as y,p as A,d as D,X as W,B as C,o as T,J as X,x as v}from"./index-3oaVaAML.js";const h={colors:{bg:"#0a0a0a",frame:"#1a1a1a",frameBorder:"#333",screen:"#111a11",screenBorder:"#0f0",line:"#0f0",grid:"rgba(0, 255, 0, 0.08)",knob:"#222",knobHighlight:"#444",knobRing:"#0f0",text:"#0f0",textDim:"rgba(0, 255, 0, 0.4)"},frame:{padding:.08,cornerRadius:20,knobSize:.07},line:{width:2,maxPoints:1e4,sensitivity:.6},grid:{spacing:20},knob:{friction:.75},autoDraw:{speed:150,knobRotationScale:.02}},Y={logo:"M 0 30.276 L 0 9.358 L 0 0.845 L 17.139 0.845 L 17.139 -5.247 L 5.189 -5.247 L 5.189 -19.273 L 0 -19.273 L 0 -4.975 L 0 0.845 L -8.618 0.845 L -25.071 0.845 L -25.071 9.757 L -7.593 9.757 L -7.593 30.276 L 0 30.276 Z M 50 20.33 L 50 6.031 L 50 0.211 L 75.068 0.211 L 75.068 -8.702 L 57.59 -8.702 L 57.59 -29.22 L 50 -29.22 L 50 -8.303 L 50 0.211 L 32.859 0.211 L 32.859 6.304 L 44.806 6.304 L 44.806 20.33 L 50 20.33 Z",star:"M 0.5 0.1 L 0.6 0.4 L 0.9 0.4 L 0.65 0.6 L 0.75 0.9 L 0.5 0.7 L 0.25 0.9 L 0.35 0.6 L 0.1 0.4 L 0.4 0.4 Z",spiral:(()=>{let p="M 0.5 0.5";for(let t=0;t<720;t+=5){const e=t*Math.PI/180,r=.02+t/720*.4,s=.5+Math.cos(e)*r,i=.5+Math.sin(e)*r;p+=` L ${s.toFixed(3)} ${i.toFixed(3)}`}return p})(),house:"M 0.2 0.7 L 0.2 0.4 L 0.5 0.15 L 0.8 0.4 L 0.8 0.7 L 0.2 0.7 M 0.35 0.7 L 0.35 0.5 L 0.5 0.5 L 0.5 0.7 M 0.6 0.45 L 0.7 0.45 L 0.7 0.55 L 0.6 0.55 L 0.6 0.45"};class R extends T{constructor(t,e={}){super(t,e),this.radius=e.radius||40,this.label=e.label||"",this.axis=e.label==="X"?"x":"y",this.angle=0,this.velocity=0,this.dragging=!1,this.returning=!1,this.lastAngle=0,this.dragStartAngle=0,this.accumulatedRotation=0,this.gridStepThreshold=Math.PI/6,this.discreteAngle=0,this.createVisuals(),this.interactive=!0,this.setupInteraction()}createVisuals(){const t=this.radius;this.outerRing=new v(t+4,{color:h.colors.frameBorder}),this.body=new v(t,{color:h.colors.knob}),this.highlight=new v(t*.2,{x:0,y:0,color:h.colors.knobHighlight}),this.indicator=new v(4,{x:0,y:-t*.7,color:h.colors.knobRing}),this.gripLines=[];const e=8;for(let r=0;r<e;r++){const s=r/e*Math.PI*2;this.gripLines.push({angle:s,innerR:t*.5,outerR:t*.85})}}setupInteraction(){this.on("inputdown",t=>{this.dragging=!0,this.lastAngle=this.angle,this.accumulatedRotation=0,this.outerRing.color=h.colors.knobRing}),this.game.events.on("mouseup",()=>{this.dragging&&(this.dragging=!1,this.returning=!0,this.accumulatedRotation=0,this.discreteAngle=0,this.outerRing.color=h.colors.frameBorder)}),this.game.events.on("mousemove",()=>{if(this.dragging){const t=this.game.width/2+this.x,e=this.game.height/2+this.y,r=Math.atan2(y.y-e,y.x-t)+Math.PI/2;let s=r-this.lastAngle;if(s>Math.PI&&(s-=Math.PI*2),s<-Math.PI&&(s+=Math.PI*2),this.game.gridMode){for(this.accumulatedRotation+=s;Math.abs(this.accumulatedRotation)>=this.gridStepThreshold;){const i=this.accumulatedRotation>0?1:-1,o=h.grid.spacing;this.axis==="x"?this.game.screen.moveCursor(o*i,0):this.game.screen.moveCursor(0,o*i),this.discreteAngle+=i*(Math.PI/4),this.accumulatedRotation-=i*this.gridStepThreshold}this.angle=this.discreteAngle}else this.angle=r,this.velocity=s*3;this.lastAngle=r}})}update(t){super.update(t),this.dragging||(this.returning?(this.angle*=Math.exp(-8*t),this.discreteAngle*=Math.exp(-8*t),Math.abs(this.angle)<.01&&(this.angle=0,this.discreteAngle=0,this.returning=!1),this.velocity=0):(this.angle+=this.velocity*t*2,this.velocity*=h.knob.friction,Math.abs(this.velocity)<.01&&(this.velocity=0)));const e=this.angle-Math.PI/2;this.indicator.x=Math.cos(e)*this.radius*.7,this.indicator.y=Math.sin(e)*this.radius*.7,this.indicator.color=this.game.gridMode?"#0ff":h.colors.knobRing}getBounds(){return{x:this.x,y:this.y,width:this.radius*2,height:this.radius*2}}draw(){super.draw();const t=L.ctx;this.outerRing.render(),this.body.render(),t.save(),t.strokeStyle=h.colors.frameBorder,t.lineWidth=2;for(const e of this.gripLines){const r=this.angle+e.angle;t.beginPath(),t.moveTo(Math.cos(r)*e.innerR,Math.sin(r)*e.innerR),t.lineTo(Math.cos(r)*e.outerR,Math.sin(r)*e.outerR),t.stroke()}t.restore(),this.highlight.render(),this.indicator.render(),this.label&&(t.save(),t.fillStyle=h.colors.textDim,t.font='12px "Fira Code", monospace',t.textAlign="center",t.fillText(this.label,0,this.radius+20),t.restore())}}class E extends T{constructor(t,e={}){super(t,e),this.screenWidth=e.screenWidth||400,this.screenHeight=e.screenHeight||300,this.points=[],this.cursorX=this.screenWidth/2,this.cursorY=this.screenHeight/2,this.sandParticles=[],this.isClearing=!1,this.shakeOffset=0,this.shakeDecay=.85,this.touchDrawing=!1,this.points.push({x:this.cursorX,y:this.cursorY}),this.background=new X({width:this.screenWidth,height:this.screenHeight,color:h.colors.screen,stroke:h.colors.screenBorder,lineWidth:2}),this.setupTouchDrawing()}setupTouchDrawing(){const t=this.game.canvas;t.addEventListener("touchstart",e=>{if(this.game.autoDrawing)return;const r=e.touches[0],s=this.screenPositionFromTouch(r);s&&(e.preventDefault(),this.touchDrawing=!0,this.cursorX=s.x,this.cursorY=s.y,this.points.push({x:this.cursorX,y:this.cursorY}))},{passive:!1}),t.addEventListener("touchmove",e=>{if(!this.touchDrawing||this.game.autoDrawing)return;const r=e.touches[0],s=this.screenPositionFromTouch(r);if(s){e.preventDefault();const i=s.x-this.cursorX,o=s.y-this.cursorY;this.moveCursor(i,o)}},{passive:!1}),t.addEventListener("touchend",()=>{this.touchDrawing=!1})}screenPositionFromTouch(t){const r=this.game.canvas.getBoundingClientRect(),s=t.clientX-r.left,i=t.clientY-r.top,o=this.game.width/2,c=this.game.height/2+this.y,u=s-(o-this.screenWidth/2),l=i-(c-this.screenHeight/2),d=10;return u>=-d&&u<=this.screenWidth+d&&l>=-d&&l<=this.screenHeight+d?{x:Math.max(5,Math.min(this.screenWidth-5,u)),y:Math.max(5,Math.min(this.screenHeight-5,l))}:null}moveCursor(t,e){this.cursorX+=t,this.cursorY+=e;const r=5;this.cursorX=Math.max(r,Math.min(this.screenWidth-r,this.cursorX)),this.cursorY=Math.max(r,Math.min(this.screenHeight-r,this.cursorY));const s=this.points[this.points.length-1];Math.sqrt((this.cursorX-s.x)**2+(this.cursorY-s.y)**2)>1&&(this.points.push({x:this.cursorX,y:this.cursorY}),this.points.length>h.line.maxPoints&&this.points.shift())}clear(){if(this.isClearing||this.points.length<2)return;this.isClearing=!0,this.shakeOffset=20,this.sandParticles=[];const e=Math.max(1,Math.floor(this.points.length/500));for(let r=0;r<this.points.length;r+=e){const s=this.points[r];this.sandParticles.push({x:s.x,y:s.y,vx:(Math.random()-.5)*50,vy:(Math.random()-.5)*20,size:h.line.width+Math.random()*2,alpha:1})}this.points=[],this.cursorX=this.screenWidth/2,this.cursorY=this.screenHeight/2,this.points.push({x:this.cursorX,y:this.cursorY})}getPoints(){return this.points}update(t){if(super.update(t),this.shakeOffset>.5?this.shakeOffset*=this.shakeDecay:this.shakeOffset=0,this.sandParticles.length>0){for(let s=this.sandParticles.length-1;s>=0;s--){const i=this.sandParticles[s];i.vy+=400*t,i.vx*=.98,i.x+=i.vx*t,i.y+=i.vy*t,i.y>this.screenHeight-i.size&&(i.y=this.screenHeight-i.size,i.vy*=-.3,i.vx*=.8),i.y>=this.screenHeight-i.size-5&&Math.abs(i.vy)<20&&(i.alpha-=t*2),(i.alpha<=0||i.y>this.screenHeight+10)&&this.sandParticles.splice(s,1)}this.sandParticles.length===0&&(this.isClearing=!1)}}draw(){super.draw();const t=L.ctx;if(t.save(),this.shakeOffset>0){const s=(Math.random()-.5)*this.shakeOffset*2,i=(Math.random()-.5)*this.shakeOffset*2;t.translate(s,i)}t.save(),t.translate(-this.screenWidth/2,-this.screenHeight/2),t.fillStyle=h.colors.screen,t.strokeStyle=h.colors.screenBorder,t.lineWidth=2,t.beginPath(),t.roundRect(0,0,this.screenWidth,this.screenHeight,8),t.fill(),t.stroke(),t.strokeStyle=h.colors.grid,t.lineWidth=1;const e=h.grid.spacing;for(let s=0;s<=this.screenWidth;s+=e)t.beginPath(),t.moveTo(s,0),t.lineTo(s,this.screenHeight),t.stroke();for(let s=0;s<=this.screenHeight;s+=e)t.beginPath(),t.moveTo(0,s),t.lineTo(this.screenWidth,s),t.stroke();t.globalAlpha=.03,t.fillStyle="#0f0";for(let s=0;s<this.screenHeight;s+=3)t.fillRect(0,s,this.screenWidth,1);if(t.globalAlpha=1,this.points.length>=2){t.strokeStyle=h.colors.line,t.lineWidth=h.line.width,t.lineCap="round",t.lineJoin="round",t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(let s=1;s<this.points.length;s++){const i=this.points[s];i.move?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)}t.stroke(),t.strokeStyle="rgba(0, 255, 0, 0.3)",t.lineWidth=h.line.width+4,t.stroke()}for(const s of this.sandParticles)t.globalAlpha=s.alpha,t.fillStyle=h.colors.line,t.beginPath(),t.arc(s.x,s.y,s.size,0,Math.PI*2),t.fill();t.globalAlpha=1;const r=6;t.strokeStyle=h.colors.line,t.lineWidth=1,t.globalAlpha=.8,t.beginPath(),t.moveTo(this.cursorX-r,this.cursorY),t.lineTo(this.cursorX+r,this.cursorY),t.moveTo(this.cursorX,this.cursorY-r),t.lineTo(this.cursorX,this.cursorY+r),t.stroke(),t.fillStyle=h.colors.line,t.beginPath(),t.arc(this.cursorX,this.cursorY,3,0,Math.PI*2),t.fill(),t.globalAlpha=1,t.restore(),t.restore()}}class F extends I{constructor(t){super(t),this.backgroundColor=h.colors.bg}init(){super.init(),L.init(this.ctx),n.init(this),y.init(this),this.mainScene=new A(this,{anchor:"center"}),this.pipeline.add(this.mainScene),this.updateDimensions(),this.screen=new E(this,{x:0,y:-this.height*.12,screenWidth:this.screenW,screenHeight:this.screenH}),this.mainScene.add(this.screen);const t=D.isMobile||this.width<500,e=Math.min(this.width,this.height)*(t?.05:h.frame.knobSize);this.leftKnob=new R(this,{x:-this.width*.3,y:this.height*(t?.28:.34),radius:e,label:"X"}),this.mainScene.add(this.leftKnob),this.rightKnob=new R(this,{x:this.width*.3,y:this.height*(t?.28:.34),radius:e,label:"Y"}),this.mainScene.add(this.rightKnob),this.autoDrawing=!1,this.autoDrawPath=[],this.autoDrawIndex=0,this.autoDrawProgress=0,this.gridMode=!1,this._lastLeft=!1,this._lastRight=!1,this._lastUp=!1,this._lastDown=!1,this.shakeHistory=[],this.lastShakeTime=0,this.setupEvents(),this.createFileInput(),this.createMobileUI()}updateDimensions(){const t=this.width,e=this.height,s=Math.min(t,e)*h.frame.padding;this.screenW=t-s*2.5,this.screenH=e*.65}setupEvents(){this.events.on(n.C,()=>this.screen.clear()),this.events.on(n.G,()=>this.exportSVG()),this.events.on("keydown",t=>{(t.key==="p"||t.key==="P")&&this.fileInput.click(),t.key==="1"&&this.startPresetDraw("logo"),t.key==="2"&&this.startPresetDraw("star"),t.key==="3"&&this.startPresetDraw("spiral"),t.key==="4"&&this.startPresetDraw("house"),t.key==="Escape"&&this.stopAutoDraw()}),this.events.on("mousemove",()=>{const t=Date.now();this.shakeHistory.push({x:y.x,y:y.y,time:t}),this.shakeHistory=this.shakeHistory.filter(e=>t-e.time<500),this.detectShake()&&this.screen.clear()})}detectShake(){if(this.shakeHistory.length<10)return!1;let t=0,e=0,r=0;for(let i=1;i<this.shakeHistory.length;i++){const o=this.shakeHistory[i].x-this.shakeHistory[i-1].x,c=this.shakeHistory[i].y-this.shakeHistory[i-1].y;t+=Math.abs(o)+Math.abs(c),r!==0&&Math.sign(o)!==Math.sign(r)&&e++,r=o}const s=Date.now();return t>500&&e>6&&s-this.lastShakeTime>1e3?(this.lastShakeTime=s,!0):!1}createFileInput(){this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.accept=".svg",this.fileInput.style.display="none",document.body.appendChild(this.fileInput),this.fileInput.addEventListener("change",t=>{const e=t.target.files[0];e&&this.loadSVGFile(e),this.fileInput.value=""}),this.dragOver=!1,this.canvas.addEventListener("dragover",t=>{t.preventDefault(),t.dataTransfer.dropEffect="copy",this.dragOver=!0}),this.canvas.addEventListener("dragleave",t=>{t.preventDefault(),this.dragOver=!1}),this.canvas.addEventListener("drop",t=>{t.preventDefault(),this.dragOver=!1;const e=t.dataTransfer.files[0];e&&e.name.endsWith(".svg")&&this.loadSVGFile(e)})}createMobileUI(){const t=D.isMobile||this.width<500,e=t?30:35,r=t?40:55,s=t?4:8,i=t?55:40,o=t?"10px":"12px";this.buttonLayout=new W(this,{spacing:s,y:this.height-i,x:this.width/2}),this.pipeline.add(this.buttonLayout),[{text:"1",action:()=>this.startPresetDraw("logo")},{text:"2",action:()=>this.startPresetDraw("star")},{text:"3",action:()=>this.startPresetDraw("spiral")},{text:"4",action:()=>this.startPresetDraw("house")},{text:"CLR",action:()=>this.screen.clear()},{text:"SVG",action:()=>this.exportSVG()}].forEach(u=>{const l=new C(this,{width:r,height:e,text:u.text,font:`${o} "Fira Code", monospace`,onClick:u.action,colorDefaultBg:"rgba(0, 0, 0, 0.8)",colorDefaultStroke:"rgba(0, 255, 0, 0.5)",colorDefaultText:"#0f0",colorHoverBg:"#0f0",colorHoverStroke:"#0f0",colorHoverText:"#000",colorPressedBg:"#0a0",colorPressedStroke:"#0f0",colorPressedText:"#000"});this.buttonLayout.add(l)})}loadSVGFile(t){const e=new FileReader;e.onload=r=>{const o=new DOMParser().parseFromString(r.target.result,"image/svg+xml").querySelector("path");o&&this.startAutoDraw(o.getAttribute("d"))},e.readAsText(t)}startPresetDraw(t){const e=Y[t];e&&(this.gridMode=!1,this.screen.clear(),setTimeout(()=>this.startAutoDraw(e,t==="star"||t==="spiral"||t==="house"),500))}startAutoDraw(t,e=!1){const r=this.parseSVGPath(t,e);r.length<2||(this.screen.clear(),setTimeout(()=>{this.autoDrawPath=r,this.autoDrawIndex=0,this.autoDrawProgress=0,this.autoDrawing=!0;const s=r[0];this.screen.cursorX=s.x,this.screen.cursorY=s.y,this.screen.points=[{x:s.x,y:s.y}]},100))}parseSVGPath(t,e){const r=[];let s=0,i=0,o=0,c=0;const u=/([MLHVZmlhvz])([^MLHVZmlhvz]*)/g;let l;for(;(l=u.exec(t))!==null;){const f=l[1],g=l[2].trim().split(/[\s,]+/).map(parseFloat).filter(a=>!isNaN(a));switch(f){case"M":for(let a=0;a<g.length;a+=2)s=g[a],i=g[a+1],a===0?(o=s,c=i,r.push({x:s,y:i,move:!0})):r.push({x:s,y:i});break;case"m":for(let a=0;a<g.length;a+=2)s+=g[a],i+=g[a+1],a===0?(o=s,c=i,r.push({x:s,y:i,move:!0})):r.push({x:s,y:i});break;case"L":for(let a=0;a<g.length;a+=2)s=g[a],i=g[a+1],r.push({x:s,y:i});break;case"l":for(let a=0;a<g.length;a+=2)s+=g[a],i+=g[a+1],r.push({x:s,y:i});break;case"H":for(const a of g)s=a,r.push({x:s,y:i});break;case"h":for(const a of g)s+=a,r.push({x:s,y:i});break;case"V":for(const a of g)i=a,r.push({x:s,y:i});break;case"v":for(const a of g)i+=a,r.push({x:s,y:i});break;case"Z":case"z":r.push({x:o,y:c}),s=o,i=c;break}}const d=this.screen.screenWidth,x=this.screen.screenHeight;if(e)return r.map(f=>({x:f.x*d,y:f.y*x,move:f.move}));let w=1/0,m=1/0,k=-1/0,M=-1/0;for(const f of r)w=Math.min(w,f.x),m=Math.min(m,f.y),k=Math.max(k,f.x),M=Math.max(M,f.y);const P=k-w||1,S=M-m||1,b=Math.min(d*.8/P,x*.8/S),H=(d-P*b)/2,K=(x-S*b)/2;return r.map(f=>({x:H+(f.x-w)*b,y:K+(f.y-m)*b,move:f.move}))}stopAutoDraw(){this.autoDrawing=!1,this.autoDrawPath=[],this.leftKnob.returning=!0,this.rightKnob.returning=!0}updateAutoDraw(t){if(!this.autoDrawing||this.autoDrawPath.length<2)return;const e=h.autoDraw.speed,r=this.autoDrawPath[this.autoDrawIndex],s=this.autoDrawIndex+1;if(s>=this.autoDrawPath.length){this.autoDrawing=!1,this.leftKnob.returning=!0,this.rightKnob.returning=!0;return}const i=this.autoDrawPath[s];if(i.move){this.autoDrawIndex=s,this.autoDrawProgress=0,this.screen.cursorX=i.x,this.screen.cursorY=i.y,this.screen.points.push({x:i.x,y:i.y,move:!0});return}const o=i.x-r.x,c=i.y-r.y,u=Math.sqrt(o*o+c*c);if(u<.1){this.autoDrawIndex=s;return}this.autoDrawProgress+=e*t/u,this.autoDrawProgress>=1?(this.autoDrawProgress=0,this.autoDrawIndex=s,this.screen.cursorX=i.x,this.screen.cursorY=i.y):(this.screen.cursorX=r.x+o*this.autoDrawProgress,this.screen.cursorY=r.y+c*this.autoDrawProgress);const l=h.autoDraw.knobRotationScale;this.leftKnob.angle+=o*l,this.rightKnob.angle+=c*l;const d=this.screen.points[this.screen.points.length-1];Math.sqrt((this.screen.cursorX-d.x)**2+(this.screen.cursorY-d.y)**2)>1&&this.screen.points.push({x:this.screen.cursorX,y:this.screen.cursorY})}exportSVG(){const t=this.screen.getPoints();if(t.length<2)return;let e=`M ${t[0].x.toFixed(2)} ${t[0].y.toFixed(2)}`;for(let l=1;l<t.length;l++){const d=t[l],x=d.move?"M":"L";e+=` ${x} ${d.x.toFixed(2)} ${d.y.toFixed(2)}`}const r=this.screen.screenWidth,s=this.screen.screenHeight,i=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="${r}" height="${s}" viewBox="0 0 ${r} ${s}">
  <title>Etch-a-Sketch Export - Genuary 2026 Day 22</title>
  <path d="${e}" fill="none" stroke="#000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,o=new Blob([i],{type:"image/svg+xml"}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download="etch-a-sketch-day22.svg",u.click(),URL.revokeObjectURL(c)}update(t){if(super.update(t),this.autoDrawing){this.updateAutoDraw(t);return}if(this.gridMode){const e=h.grid.spacing,r=n.isDown(n.A)||n.isDown(n.LEFT),s=n.isDown(n.D)||n.isDown(n.RIGHT),i=n.isDown(n.W)||n.isDown(n.UP)||n.isDown(n.J),o=n.isDown(n.S)||n.isDown(n.DOWN)||n.isDown(n.L);r&&!this._lastLeft&&(this.screen.moveCursor(-e,0),this.leftKnob.angle-=.3,this.leftKnob.returning=!1),s&&!this._lastRight&&(this.screen.moveCursor(e,0),this.leftKnob.angle+=.3,this.leftKnob.returning=!1),i&&!this._lastUp&&(this.screen.moveCursor(0,-e),this.rightKnob.angle-=.3,this.rightKnob.returning=!1),o&&!this._lastDown&&(this.screen.moveCursor(0,e),this.rightKnob.angle+=.3,this.rightKnob.returning=!1),!r&&!s&&!this.leftKnob.dragging&&(this.leftKnob.returning=!0),!i&&!o&&!this.rightKnob.dragging&&(this.rightKnob.returning=!0),this._lastLeft=r,this._lastRight=s,this._lastUp=i,this._lastDown=o}else{n.isDown(n.A)||n.isDown(n.LEFT)||n.isDown(n.D)||n.isDown(n.RIGHT),n.isDown(n.A)||n.isDown(n.LEFT)?(this.leftKnob.velocity=-1.65,this.leftKnob.returning=!1):n.isDown(n.D)||n.isDown(n.RIGHT)?(this.leftKnob.velocity=1.65,this.leftKnob.returning=!1):!this.leftKnob.dragging&&Math.abs(this.leftKnob.velocity)<.05&&(this.leftKnob.returning=!0),n.isDown(n.W)||n.isDown(n.UP)||n.isDown(n.J)||n.isDown(n.S)||n.isDown(n.DOWN)||n.isDown(n.L),n.isDown(n.W)||n.isDown(n.UP)||n.isDown(n.J)?(this.rightKnob.velocity=-1.65,this.rightKnob.returning=!1):n.isDown(n.S)||n.isDown(n.DOWN)||n.isDown(n.L)?(this.rightKnob.velocity=1.65,this.rightKnob.returning=!1):!this.rightKnob.dragging&&Math.abs(this.rightKnob.velocity)<.05&&(this.rightKnob.returning=!0);const r=h.line.sensitivity*Math.min(this.screenW,this.screenH),s=this.leftKnob.velocity*r*t,i=this.rightKnob.velocity*r*t;(Math.abs(s)>.01||Math.abs(i)>.01)&&this.screen.moveCursor(s,i)}}render(){const t=this.ctx;t.fillStyle=h.colors.frame,t.strokeStyle=h.colors.frameBorder,t.lineWidth=2,t.beginPath(),t.roundRect(10,10,this.width-20,this.height-20,h.frame.cornerRadius),t.fill(),t.stroke(),t.fillStyle=h.colors.text,t.font='bold 16px "Fira Code", monospace',t.textAlign="center",t.fillText("ETCH-A-SKETCH",this.width/2,35),t.font='10px "Fira Code", monospace',t.fillStyle=h.colors.textDim,t.fillText("GENUARY 2026",this.width/2,50);const e=D.isMobile||this.width<500;t.fillStyle=h.colors.textDim,t.font=`${e?"9px":"10px"} "Fira Code", monospace`,this.autoDrawing?(t.fillStyle=h.colors.text,t.fillText(e?"AUTO-DRAWING...":"AUTO-DRAWING... [ESC] to stop",this.width/2,this.height-15)):e?t.fillText("TOUCH SCREEN TO DRAW",this.width/2,this.height-15):t.fillText("[A/D] X • [W/S] Y • [C] clear • [G] export • [1-4] presets • drag SVG",this.width/2,this.height-15),super.render(),this.dragOver&&(t.fillStyle="rgba(0, 255, 0, 0.1)",t.fillRect(0,0,this.width,this.height),t.strokeStyle="#0f0",t.lineWidth=4,t.setLineDash([10,10]),t.strokeRect(20,20,this.width-40,this.height-40),t.setLineDash([]),t.fillStyle="#0f0",t.font='bold 24px "Fira Code", monospace',t.textAlign="center",t.fillText("DROP SVG FILE",this.width/2,this.height/2))}onResize(){this.updateDimensions(),this.screen&&(this.screen.screenWidth=this.screenW,this.screen.screenHeight=this.screenH,this.screen.y=-this.height*.12);const t=D.isMobile||this.width<500,e=Math.min(this.width,this.height)*(t?.05:h.frame.knobSize);this.leftKnob&&(this.leftKnob.x=-this.width*.3,this.leftKnob.y=this.height*(t?.28:.34),this.leftKnob.radius=e),this.rightKnob&&(this.rightKnob.x=this.width*.3,this.rightKnob.y=this.height*(t?.28:.34),this.rightKnob.radius=e)}}function G(p){const t=new F(p);return t.start(),{stop:()=>t.stop(),game:t}}export{G as default};
